<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Sec 6 Self-learning | Recommender System</title>
  <meta name="description" content="Sec 6 Self-learning | Recommender System" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Sec 6 Self-learning | Recommender System" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Sec 6 Self-learning | Recommender System" />
  
  
  

<meta name="author" content="ZIH-YING, LI" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="collaborative-filtering.html"/>
<link rel="next" href="final-project.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.30/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #2a211c;
    color: #bdae9d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
div.sourceCode
  { color: #bdae9d; background-color: #2a211c; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffff00; } /* Alert */
code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #44aa43; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code span.ch { color: #049b0a; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code span.do { color: #0066ff; font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.dv { color: #44aa43; } /* DecVal */
code span.er { color: #ffff00; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #44aa43; } /* Float */
code span.fu { color: #ff9358; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code span.op { } /* Operator */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.sc { color: #049b0a; } /* SpecialChar */
code span.ss { color: #049b0a; } /* SpecialString */
code span.st { color: #049b0a; } /* String */
code span.va { } /* Variable */
code span.vs { color: #049b0a; } /* VerbatimString */
code span.wa { color: #ffff00; font-weight: bold; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Recommender System</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="note.html"><a href="note.html"><i class="fa fa-check"></i>Note</a></li>
<li class="chapter" data-level="" data-path="problem.html"><a href="problem.html"><i class="fa fa-check"></i>Problem</a></li>
<li class="part"><span><b>I Conjoint Analysis</b></span></li>
<li class="chapter" data-level="1" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html"><i class="fa fa-check"></i><b>1</b> Conjoint Analysis</a>
<ul>
<li class="chapter" data-level="1.1" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#example"><i class="fa fa-check"></i><b>1.1</b> Example</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#preprocess"><i class="fa fa-check"></i><b>1.1.1</b> Preprocess</a></li>
<li class="chapter" data-level="1.1.2" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#compute-part-worth"><i class="fa fa-check"></i><b>1.1.2</b> Compute part-worth</a></li>
<li class="chapter" data-level="1.1.3" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#compute-relative-importance"><i class="fa fa-check"></i><b>1.1.3</b> Compute relative importance</a></li>
<li class="chapter" data-level="1.1.4" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#output"><i class="fa fa-check"></i><b>1.1.4</b> Output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="self-learning.html"><a href="self-learning.html"><i class="fa fa-check"></i><b>2</b> Self-learning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="self-learning.html"><a href="self-learning.html#enter-new-ranking"><i class="fa fa-check"></i><b>2.1</b> Enter new ranking</a></li>
<li class="chapter" data-level="2.2" data-path="self-learning.html"><a href="self-learning.html#add-interaction"><i class="fa fa-check"></i><b>2.2</b> Add interaction</a></li>
<li class="chapter" data-level="2.3" data-path="self-learning.html"><a href="self-learning.html#rewrite-spine_chart.r"><i class="fa fa-check"></i><b>2.3</b> Rewrite spine_chart.R</a></li>
</ul></li>
<li class="part"><span><b>II Association Rule</b></span></li>
<li class="chapter" data-level="3" data-path="association-rule.html"><a href="association-rule.html"><i class="fa fa-check"></i><b>3</b> Association Rule</a>
<ul>
<li class="chapter" data-level="3.1" data-path="association-rule.html"><a href="association-rule.html#evaluation-metrics"><i class="fa fa-check"></i><b>3.1</b> Evaluation Metrics</a></li>
<li class="chapter" data-level="3.2" data-path="association-rule.html"><a href="association-rule.html#example-dvd"><i class="fa fa-check"></i><b>3.2</b> Example: DVD</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="association-rule.html"><a href="association-rule.html#prepare-data"><i class="fa fa-check"></i><b>3.2.1</b> Prepare data</a></li>
<li class="chapter" data-level="3.2.2" data-path="association-rule.html"><a href="association-rule.html#mining-rules"><i class="fa fa-check"></i><b>3.2.2</b> Mining rules</a></li>
<li class="chapter" data-level="3.2.3" data-path="association-rule.html"><a href="association-rule.html#by-apriori-get-rules"><i class="fa fa-check"></i><b>3.2.3</b> By Apriori get rules</a></li>
<li class="chapter" data-level="3.2.4" data-path="association-rule.html"><a href="association-rule.html#by-eclat-equivalence-class-clustering-and-bottom-up-lattice-traversal."><i class="fa fa-check"></i><b>3.2.4</b> By Eclat: Equivalence Class Clustering and bottom-up Lattice Traversal.</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="association-rule.html"><a href="association-rule.html#example-income"><i class="fa fa-check"></i><b>3.3</b> Example: Income</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="association-rule.html"><a href="association-rule.html#IFP-ex"><i class="fa fa-check"></i><b>3.3.1</b> explore data</a></li>
<li class="chapter" data-level="3.3.2" data-path="association-rule.html"><a href="association-rule.html#get-rules-with-apriori"><i class="fa fa-check"></i><b>3.3.2</b> get rules with apriori</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="association-rule.html"><a href="association-rule.html#處理多餘規則-example-groceries"><i class="fa fa-check"></i><b>3.4</b> [處理多餘規則] Example: Groceries</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="association-rule.html"><a href="association-rule.html#基本處理"><i class="fa fa-check"></i><b>3.4.1</b> 基本處理</a></li>
<li class="chapter" data-level="3.4.2" data-path="association-rule.html"><a href="association-rule.html#處理冗贅的規則"><i class="fa fa-check"></i><b>3.4.2</b> 處理冗贅的規則</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="self-learning-1.html"><a href="self-learning-1.html"><i class="fa fa-check"></i><b>4</b> Self-learning</a>
<ul>
<li class="chapter" data-level="4.1" data-path="self-learning-1.html"><a href="self-learning-1.html#check-details-of-income-data-set"><i class="fa fa-check"></i><b>4.1</b> check details of <code>Income</code> data set</a></li>
<li class="chapter" data-level="4.2" data-path="self-learning-1.html"><a href="self-learning-1.html#compare-different-grouping-regroup-income-into-2-levels"><i class="fa fa-check"></i><b>4.2</b> [compare different grouping] regroup income into 2 levels</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="self-learning-1.html"><a href="self-learning-1.html#explore-data"><i class="fa fa-check"></i><b>4.2.1</b> explore data</a></li>
<li class="chapter" data-level="4.2.2" data-path="self-learning-1.html"><a href="self-learning-1.html#explore-rule"><i class="fa fa-check"></i><b>4.2.2</b> explore rule</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="self-learning-1.html"><a href="self-learning-1.html#compare-different-algorithm-mine-rule-of-adultuci-data-set"><i class="fa fa-check"></i><b>4.3</b> [compare different algorithm] mine rule of <code>AdultUCI</code> data set</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="self-learning-1.html"><a href="self-learning-1.html#details-of-data"><i class="fa fa-check"></i><b>4.3.1</b> details of data</a></li>
<li class="chapter" data-level="4.3.2" data-path="self-learning-1.html"><a href="self-learning-1.html#explore-data-1"><i class="fa fa-check"></i><b>4.3.2</b> explore data</a></li>
<li class="chapter" data-level="4.3.3" data-path="self-learning-1.html"><a href="self-learning-1.html#explore-rule-1"><i class="fa fa-check"></i><b>4.3.3</b> explore rule</a></li>
<li class="chapter" data-level="4.3.4" data-path="self-learning-1.html"><a href="self-learning-1.html#conclusion"><i class="fa fa-check"></i><b>4.3.4</b> conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="self-learning-1.html"><a href="self-learning-1.html#就診紀錄"><i class="fa fa-check"></i><b>4.4</b> 就診紀錄</a></li>
<li class="chapter" data-level="4.5" data-path="self-learning-1.html"><a href="self-learning-1.html#早餐店購買紀錄"><i class="fa fa-check"></i><b>4.5</b> 早餐店購買紀錄</a></li>
<li class="chapter" data-level="4.6" data-path="self-learning-1.html"><a href="self-learning-1.html#groceries-data"><i class="fa fa-check"></i><b>4.6</b> Groceries data</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="self-learning-1.html"><a href="self-learning-1.html#rightarrow-item"><i class="fa fa-check"></i><b>4.6.1</b> ??? <span class="math inline">\(\rightarrow\)</span> item</a></li>
<li class="chapter" data-level="4.6.2" data-path="self-learning-1.html"><a href="self-learning-1.html#item-rightarrow"><i class="fa fa-check"></i><b>4.6.2</b> item <span class="math inline">\(\rightarrow\)</span> ???</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Collaborative filtering</b></span></li>
<li class="chapter" data-level="5" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html"><i class="fa fa-check"></i><b>5</b> Collaborative filtering</a>
<ul>
<li class="chapter" data-level="5.1" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#methods-for-realratingmatrix-class"><i class="fa fa-check"></i><b>5.1</b> Methods for “realRatingMatrix” Class</a></li>
<li class="chapter" data-level="5.2" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#compare-the-storage-sizes"><i class="fa fa-check"></i><b>5.2</b> Compare the storage sizes</a></li>
<li class="chapter" data-level="5.3" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#computie-similarity-matrix"><i class="fa fa-check"></i><b>5.3</b> Computie Similarity Matrix</a></li>
<li class="chapter" data-level="5.4" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#recommender-model"><i class="fa fa-check"></i><b>5.4</b> Recommender Model</a></li>
<li class="chapter" data-level="5.5" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>5.5</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#rating"><i class="fa fa-check"></i><b>5.5.1</b> Rating</a></li>
<li class="chapter" data-level="5.5.2" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#movie-views"><i class="fa fa-check"></i><b>5.5.2</b> Movie views</a></li>
<li class="chapter" data-level="5.5.3" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#average-ratings"><i class="fa fa-check"></i><b>5.5.3</b> Average ratings</a></li>
<li class="chapter" data-level="5.5.4" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#rating-matrix"><i class="fa fa-check"></i><b>5.5.4</b> Rating Matrix</a></li>
<li class="chapter" data-level="5.5.5" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#normalize"><i class="fa fa-check"></i><b>5.5.5</b> Normalize</a></li>
<li class="chapter" data-level="5.5.6" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#binarization"><i class="fa fa-check"></i><b>5.5.6</b> Binarization</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#rating-example-movie"><i class="fa fa-check"></i><b>5.6</b> [Rating] Example: Movie</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#IBCF"><i class="fa fa-check"></i><b>5.6.1</b> [Rating] Item-based Collaborative Filtering</a></li>
<li class="chapter" data-level="5.6.2" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#UBCF"><i class="fa fa-check"></i><b>5.6.2</b> [Rating] User-based Collaborative Filtering</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#binary-example-movie"><i class="fa fa-check"></i><b>5.7</b> [Binary] Example: Movie</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#binary-item-based-collaborative-filtering"><i class="fa fa-check"></i><b>5.7.1</b> [Binary] Item-based Collaborative Filtering</a></li>
<li class="chapter" data-level="5.7.2" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#binary-user-based-collaborative-filtering"><i class="fa fa-check"></i><b>5.7.2</b> [Binary] User-based Collaborative Filtering</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="self-learning-2.html"><a href="self-learning-2.html"><i class="fa fa-check"></i><b>6</b> Self-learning</a>
<ul>
<li class="chapter" data-level="6.1" data-path="self-learning-2.html"><a href="self-learning-2.html#eda-movielens"><i class="fa fa-check"></i><b>6.1</b> [EDA] MovieLens</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="self-learning-2.html"><a href="self-learning-2.html#get-data"><i class="fa fa-check"></i><b>6.1.1</b> Get data</a></li>
<li class="chapter" data-level="6.1.2" data-path="self-learning-2.html"><a href="self-learning-2.html#eda"><i class="fa fa-check"></i><b>6.1.2</b> EDA</a></li>
<li class="chapter" data-level="6.1.3" data-path="self-learning-2.html"><a href="self-learning-2.html#adjust-plot-output"><i class="fa fa-check"></i><b>6.1.3</b> Adjust plot output</a></li>
<li class="chapter" data-level="6.1.4" data-path="self-learning-2.html"><a href="self-learning-2.html#average-ratings-1"><i class="fa fa-check"></i><b>6.1.4</b> Average Ratings</a></li>
<li class="chapter" data-level="6.1.5" data-path="self-learning-2.html"><a href="self-learning-2.html#rating-matrix-1"><i class="fa fa-check"></i><b>6.1.5</b> Rating Matrix</a></li>
<li class="chapter" data-level="6.1.6" data-path="self-learning-2.html"><a href="self-learning-2.html#normalize-1"><i class="fa fa-check"></i><b>6.1.6</b> Normalize</a></li>
<li class="chapter" data-level="6.1.7" data-path="self-learning-2.html"><a href="self-learning-2.html#binarization-1"><i class="fa fa-check"></i><b>6.1.7</b> Binarization</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="self-learning-2.html"><a href="self-learning-2.html#cf-movielens"><i class="fa fa-check"></i><b>6.2</b> [CF] MovieLens</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="self-learning-2.html"><a href="self-learning-2.html#problem1"><i class="fa fa-check"></i><b>6.2.1</b> Use <code>similarity()</code> to recheck Hand-on problem 1</a></li>
<li class="chapter" data-level="6.2.2" data-path="self-learning-2.html"><a href="self-learning-2.html#similarity-try-using-robust-statistic"><i class="fa fa-check"></i><b>6.2.2</b> Similarity: try using robust statistic</a></li>
<li class="chapter" data-level="6.2.3" data-path="self-learning-2.html"><a href="self-learning-2.html#why-the-following-code-get-different-results-between-hand-on-problem-2"><i class="fa fa-check"></i><b>6.2.3</b> Why the following code get different results between Hand-on problem 2</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Final Project</b></span></li>
<li class="chapter" data-level="7" data-path="final-project.html"><a href="final-project.html"><i class="fa fa-check"></i><b>7</b> Final Project</a></li>
<li class="divider"></li>
<li><a href="./">by ZIH-YING, LI</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Recommender System</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="self-learning-2" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Sec 6</span> Self-learning<a href="self-learning-2.html#self-learning-2" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="eda-movielens" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> [EDA] MovieLens<a href="self-learning-2.html#eda-movielens" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="get-data" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Get data<a href="self-learning-2.html#get-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Download ml-latest-small.zip from the newly released MovieLens for education. Compile a dataset as the one, MovieLense.csv, used by code.</p>
<ul>
<li class="downarrow">
列出資料夾中的所有<code>.csv</code>檔案，檢視<code>.csv</code>檔的欄位名稱及內容
</li>
</ul>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="self-learning-2.html#cb286-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&quot;data/ml-latest-small&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;links.csv&quot;   &quot;movies.csv&quot;  &quot;ratings.csv&quot; &quot;README.txt&quot;  &quot;tags.csv&quot;</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="self-learning-2.html#cb288-1" tabindex="-1"></a>file.list <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;data/ml-latest-small/&quot;</span>, <span class="fu">list.files</span>(<span class="st">&quot;data/ml-latest-small&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;.csv&quot;</span>))</span>
<span id="cb288-2"><a href="self-learning-2.html#cb288-2" tabindex="-1"></a><span class="fu">lapply</span>(file.list, <span class="cf">function</span>(x) <span class="fu">head</span>(<span class="fu">read.csv</span>(x),<span class="dv">1</span>))</span></code></pre></div>
<pre><code>## [[1]]
##   movieId imdbId tmdbId
## 1       1 114709    862
## 
## [[2]]
##   movieId            title                                      genres
## 1       1 Toy Story (1995) Adventure|Animation|Children|Comedy|Fantasy
## 
## [[3]]
##   userId movieId rating timestamp
## 1      1       1      4 964982703
## 
## [[4]]
##   userId movieId   tag  timestamp
## 1      2   60756 funny 1445714994</code></pre>
<p>裡面會用到的是<code>movies.csv</code>和<code>ratings.csv</code>，<code>tag.csv</code>裡的tag是使用者定義的，因此不考慮；而<code>movies.csv</code>裡的genres是從<strong>有限個數</strong>的類別中選出來的。</p>
<ul>
<li class="downarrow">
保留<code>ratings.csv</code>中的 userId、rating，和<code>movies.csv</code>中的 title、genres，使用<code>merger</code>以movieId串聯兩個資料集
</li>
</ul>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="self-learning-2.html#cb290-1" tabindex="-1"></a>rating <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/ml-latest-small/ratings.csv&quot;</span>)</span>
<span id="cb290-2"><a href="self-learning-2.html#cb290-2" tabindex="-1"></a>movies <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/ml-latest-small/movies.csv&quot;</span>)</span>
<span id="cb290-3"><a href="self-learning-2.html#cb290-3" tabindex="-1"></a>df.merge <span class="ot">&lt;-</span> <span class="fu">merge</span>(rating[,<span class="sc">-</span><span class="dv">4</span>], movies, <span class="at">by=</span><span class="st">&quot;movieId&quot;</span>)</span>
<span id="cb290-4"><a href="self-learning-2.html#cb290-4" tabindex="-1"></a>df.merge <span class="ot">&lt;-</span> df.merge[<span class="fu">order</span>(df.merge<span class="sc">$</span>userId),]</span>
<span id="cb290-5"><a href="self-learning-2.html#cb290-5" tabindex="-1"></a><span class="fu">head</span>(df.merge, <span class="dv">3</span>) <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">row.names =</span> F)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
movieId
</th>
<th style="text-align:right;">
userId
</th>
<th style="text-align:right;">
rating
</th>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
genres
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Toy Story (1995)
</td>
<td style="text-align:left;">
Adventure|Animation|Children|Comedy|Fantasy
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Grumpier Old Men (1995)
</td>
<td style="text-align:left;">
Comedy|Romance
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Heat (1995)
</td>
<td style="text-align:left;">
Action|Crime|Thriller
</td>
</tr>
</tbody>
</table>
<hr />
<p>總共有9742部電影，所有使用者看過的電影有9724部，有18部電影沒有被任何使用者看過</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="self-learning-2.html#cb291-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb291-2"><a href="self-learning-2.html#cb291-2" tabindex="-1"></a>id <span class="ot">&lt;-</span> <span class="fu">unique</span>(movies<span class="sc">$</span>movieId)[<span class="sc">!</span>(<span class="fu">unique</span>(movies<span class="sc">$</span>movieId) <span class="sc">%in%</span> <span class="fu">unique</span>(rating<span class="sc">$</span>movieId))]</span>
<span id="cb291-3"><a href="self-learning-2.html#cb291-3" tabindex="-1"></a>movies <span class="sc">%&gt;%</span> <span class="fu">filter</span>(movieId <span class="sc">%in%</span> id) <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
movieId
</th>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
genres
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1076
</td>
<td style="text-align:left;">
Innocents, The (1961)
</td>
<td style="text-align:left;">
Drama|Horror|Thriller
</td>
</tr>
<tr>
<td style="text-align:right;">
2939
</td>
<td style="text-align:left;">
Niagara (1953)
</td>
<td style="text-align:left;">
Drama|Thriller
</td>
</tr>
<tr>
<td style="text-align:right;">
3338
</td>
<td style="text-align:left;">
For All Mankind (1989)
</td>
<td style="text-align:left;">
Documentary
</td>
</tr>
<tr>
<td style="text-align:right;">
3456
</td>
<td style="text-align:left;">
Color of Paradise, The (Rang-e khoda) (1999)
</td>
<td style="text-align:left;">
Drama
</td>
</tr>
<tr>
<td style="text-align:right;">
4194
</td>
<td style="text-align:left;">
I Know Where I’m Going! (1945)
</td>
<td style="text-align:left;">
Drama|Romance|War
</td>
</tr>
<tr>
<td style="text-align:right;">
5721
</td>
<td style="text-align:left;">
Chosen, The (1981)
</td>
<td style="text-align:left;">
Drama
</td>
</tr>
<tr>
<td style="text-align:right;">
6668
</td>
<td style="text-align:left;">
Road Home, The (Wo de fu qin mu qin) (1999)
</td>
<td style="text-align:left;">
Drama|Romance
</td>
</tr>
<tr>
<td style="text-align:right;">
6849
</td>
<td style="text-align:left;">
Scrooge (1970)
</td>
<td style="text-align:left;">
Drama|Fantasy|Musical
</td>
</tr>
<tr>
<td style="text-align:right;">
7020
</td>
<td style="text-align:left;">
Proof (1991)
</td>
<td style="text-align:left;">
Comedy|Drama|Romance
</td>
</tr>
<tr>
<td style="text-align:right;">
7792
</td>
<td style="text-align:left;">
Parallax View, The (1974)
</td>
<td style="text-align:left;">
Thriller
</td>
</tr>
<tr>
<td style="text-align:right;">
8765
</td>
<td style="text-align:left;">
This Gun for Hire (1942)
</td>
<td style="text-align:left;">
Crime|Film-Noir|Thriller
</td>
</tr>
<tr>
<td style="text-align:right;">
25855
</td>
<td style="text-align:left;">
Roaring Twenties, The (1939)
</td>
<td style="text-align:left;">
Crime|Drama|Thriller
</td>
</tr>
<tr>
<td style="text-align:right;">
26085
</td>
<td style="text-align:left;">
Mutiny on the Bounty (1962)
</td>
<td style="text-align:left;">
Adventure|Drama|Romance
</td>
</tr>
<tr>
<td style="text-align:right;">
30892
</td>
<td style="text-align:left;">
In the Realms of the Unreal (2004)
</td>
<td style="text-align:left;">
Animation|Documentary
</td>
</tr>
<tr>
<td style="text-align:right;">
32160
</td>
<td style="text-align:left;">
Twentieth Century (1934)
</td>
<td style="text-align:left;">
Comedy
</td>
</tr>
<tr>
<td style="text-align:right;">
32371
</td>
<td style="text-align:left;">
Call Northside 777 (1948)
</td>
<td style="text-align:left;">
Crime|Drama|Film-Noir
</td>
</tr>
<tr>
<td style="text-align:right;">
34482
</td>
<td style="text-align:left;">
Browning Version, The (1951)
</td>
<td style="text-align:left;">
Drama
</td>
</tr>
<tr>
<td style="text-align:right;">
85565
</td>
<td style="text-align:left;">
Chalet Girl (2011)
</td>
<td style="text-align:left;">
Comedy|Romance
</td>
</tr>
</tbody>
</table>
<hr />
<p>但是合併完的資料共有9719部電影 (以標題計算)，檢視以後發現 id 個數比 title 多，表示有<strong>標題一樣但 id 不一樣</strong>的問題</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="self-learning-2.html#cb292-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df.merge<span class="sc">$</span>movieId))</span>
<span id="cb292-2"><a href="self-learning-2.html#cb292-2" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(df.merge<span class="sc">$</span>title))</span></code></pre></div>
<pre><code>## [1] 9724
## [1] 9719</code></pre>
<p>id 比 title 多了 5 個，
第一個方法使用基本的套件，第二個方法使用 <code>dplyr</code> 套件，兩種方法找到的不太一樣</p>
<ul>
<li><code>duplicated</code>會<strong>剔除第一個然後保留重複的</strong>，所以<code>!duplicated</code>會保留第一個</li>
<li><code>dplyr</code>以分組後的個數來挑選</li>
</ul>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="self-learning-2.html#cb294-1" tabindex="-1"></a><span class="co"># Method 1: base R</span></span>
<span id="cb294-2"><a href="self-learning-2.html#cb294-2" tabindex="-1"></a>test <span class="ot">&lt;-</span> df.merge[<span class="sc">!</span><span class="fu">duplicated</span>(df.merge<span class="sc">$</span>movieId),<span class="fu">c</span>(<span class="st">&quot;movieId&quot;</span>,<span class="st">&quot;title&quot;</span>)]</span>
<span id="cb294-3"><a href="self-learning-2.html#cb294-3" tabindex="-1"></a>test[<span class="fu">duplicated</span>(test<span class="sc">$</span>title),] <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">row.names =</span> F)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
movieId
</th>
<th style="text-align:left;">
title
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
64997
</td>
<td style="text-align:left;">
War of the Worlds (2005)
</td>
</tr>
<tr>
<td style="text-align:right;">
144606
</td>
<td style="text-align:left;">
Confessions of a Dangerous Mind (2002)
</td>
</tr>
<tr>
<td style="text-align:right;">
26958
</td>
<td style="text-align:left;">
Emma (1996)
</td>
</tr>
<tr>
<td style="text-align:right;">
168358
</td>
<td style="text-align:left;">
Saturn 3 (1980)
</td>
</tr>
<tr>
<td style="text-align:right;">
32600
</td>
<td style="text-align:left;">
Eros (2004)
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="self-learning-2.html#cb295-1" tabindex="-1"></a><span class="co"># Method 2: dplyr</span></span>
<span id="cb295-2"><a href="self-learning-2.html#cb295-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb295-3"><a href="self-learning-2.html#cb295-3" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> df.merge <span class="sc">%&gt;%</span> </span>
<span id="cb295-4"><a href="self-learning-2.html#cb295-4" tabindex="-1"></a>  <span class="fu">group_by</span>(title) <span class="sc">%&gt;%</span></span>
<span id="cb295-5"><a href="self-learning-2.html#cb295-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb295-6"><a href="self-learning-2.html#cb295-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">&quot;movieId&quot;</span>,<span class="st">&quot;title&quot;</span>))</span>
<span id="cb295-7"><a href="self-learning-2.html#cb295-7" tabindex="-1"></a>tmp <span class="sc">%&gt;%</span> </span>
<span id="cb295-8"><a href="self-learning-2.html#cb295-8" tabindex="-1"></a>  <span class="fu">group_by</span>(movieId) <span class="sc">%&gt;%</span></span>
<span id="cb295-9"><a href="self-learning-2.html#cb295-9" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">==</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb295-10"><a href="self-learning-2.html#cb295-10" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
movieId
</th>
<th style="text-align:left;">
title
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
144606
</td>
<td style="text-align:left;">
Confessions of a Dangerous Mind (2002)
</td>
</tr>
<tr>
<td style="text-align:right;">
147002
</td>
<td style="text-align:left;">
Eros (2004)
</td>
</tr>
<tr>
<td style="text-align:right;">
26958
</td>
<td style="text-align:left;">
Emma (1996)
</td>
</tr>
<tr>
<td style="text-align:right;">
168358
</td>
<td style="text-align:left;">
Saturn 3 (1980)
</td>
</tr>
<tr>
<td style="text-align:right;">
32600
</td>
<td style="text-align:left;">
Eros (2004)
</td>
</tr>
</tbody>
</table>
<ul>
<li>M1:
<ul>
<li>顯示不同 id 但 title 相同的資料</li>
</ul></li>
<li>M2:
<ul>
<li>沒有”War of the Worlds (2005)“，因為第2步只保留出現過1次的，但它的兩個id都出現超過1次</li>
<li>有兩個”Eros (2004)“，因為兩個id都只出現一次</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="self-learning-2.html#cb296-1" tabindex="-1"></a><span class="co"># df.merge[df.merge$title==&quot;Emma (1996)&quot;,]</span></span>
<span id="cb296-2"><a href="self-learning-2.html#cb296-2" tabindex="-1"></a><span class="co"># df.merge[df.merge$title==&quot;Confessions of a Dangerous Mind (2002)&quot;,]</span></span>
<span id="cb296-3"><a href="self-learning-2.html#cb296-3" tabindex="-1"></a><span class="co"># df.merge[df.merge$title==&quot;Saturn 3 (1980)&quot;,] %&gt;% knitr::kable()</span></span>
<span id="cb296-4"><a href="self-learning-2.html#cb296-4" tabindex="-1"></a>df.merge[df.merge<span class="sc">$</span>title<span class="sc">==</span><span class="st">&quot;Eros (2004)&quot;</span>,] <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">row.names =</span> F)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
movieId
</th>
<th style="text-align:right;">
userId
</th>
<th style="text-align:right;">
rating
</th>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
genres
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
147002
</td>
<td style="text-align:right;">
318
</td>
<td style="text-align:right;">
4.0
</td>
<td style="text-align:left;">
Eros (2004)
</td>
<td style="text-align:left;">
Drama|Romance
</td>
</tr>
<tr>
<td style="text-align:right;">
32600
</td>
<td style="text-align:right;">
606
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:left;">
Eros (2004)
</td>
<td style="text-align:left;">
Drama
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="self-learning-2.html#cb297-1" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> df.merge[df.merge<span class="sc">$</span>title<span class="sc">==</span><span class="st">&quot;War of the Worlds (2005)&quot;</span>,] </span>
<span id="cb297-2"><a href="self-learning-2.html#cb297-2" tabindex="-1"></a>tmp[<span class="fu">order</span>(tmp<span class="sc">$</span>movieId),] <span class="sc">%&gt;%</span> </span>
<span id="cb297-3"><a href="self-learning-2.html#cb297-3" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb297-4"><a href="self-learning-2.html#cb297-4" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">row.names =</span> F)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
movieId
</th>
<th style="text-align:right;">
userId
</th>
<th style="text-align:right;">
rating
</th>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
genres
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
34048
</td>
<td style="text-align:right;">
590
</td>
<td style="text-align:right;">
2.5
</td>
<td style="text-align:left;">
War of the Worlds (2005)
</td>
<td style="text-align:left;">
Action|Adventure|Sci-Fi|Thriller
</td>
</tr>
<tr>
<td style="text-align:right;">
34048
</td>
<td style="text-align:right;">
608
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:left;">
War of the Worlds (2005)
</td>
<td style="text-align:left;">
Action|Adventure|Sci-Fi|Thriller
</td>
</tr>
<tr>
<td style="text-align:right;">
34048
</td>
<td style="text-align:right;">
610
</td>
<td style="text-align:right;">
4.0
</td>
<td style="text-align:left;">
War of the Worlds (2005)
</td>
<td style="text-align:left;">
Action|Adventure|Sci-Fi|Thriller
</td>
</tr>
<tr>
<td style="text-align:right;">
64997
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:left;">
War of the Worlds (2005)
</td>
<td style="text-align:left;">
Action|Sci-Fi
</td>
</tr>
<tr>
<td style="text-align:right;">
64997
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
2.5
</td>
<td style="text-align:left;">
War of the Worlds (2005)
</td>
<td style="text-align:left;">
Action|Sci-Fi
</td>
</tr>
</tbody>
</table>
<p>可以看到相同片名但不同id是因為類型(genres)不同</p>
<hr />
<ul>
<li class="downarrow">
資料轉換成矩陣
</li>
</ul>
<p><strong><em>Notice</em></strong>: 使用<code>as(df, "realRatingMatrix")</code>，df的欄位要<strong>按照user, item, rating的順序</strong></p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="self-learning-2.html#cb298-1" tabindex="-1"></a><span class="fu">library</span>(recommenderlab)</span>
<span id="cb298-2"><a href="self-learning-2.html#cb298-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> df.merge <span class="sc">%&gt;%</span> </span>
<span id="cb298-3"><a href="self-learning-2.html#cb298-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;userId&quot;</span>, <span class="st">&quot;title&quot;</span>, <span class="st">&quot;rating&quot;</span>)</span>
<span id="cb298-4"><a href="self-learning-2.html#cb298-4" tabindex="-1"></a>ratMatr <span class="ot">&lt;-</span> <span class="fu">as</span>(df, <span class="st">&quot;realRatingMatrix&quot;</span>)</span>
<span id="cb298-5"><a href="self-learning-2.html#cb298-5" tabindex="-1"></a><span class="fu">dim</span>(ratMatr)</span></code></pre></div>
<pre><code>## [1]  610 9719</code></pre>
<ul>
<li>資料包含610個使用者、9719部電影</li>
<li>儲存空間
<ul>
<li>data.frame: 3233872 bytes</li>
<li>realRatingMatrix: 2180896 bytes</li>
<li>matrix: 48358832 bytes (是realRatingMatrix的9.05倍)</li>
</ul></li>
</ul>
</div>
<div id="eda" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> EDA<a href="self-learning-2.html#eda" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="self-learning-2.html#cb300-1" tabindex="-1"></a><span class="fu">slotNames</span>(ratMatr)</span></code></pre></div>
<pre><code>## [1] &quot;data&quot;      &quot;normalize&quot;</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="self-learning-2.html#cb302-1" tabindex="-1"></a>rat <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(ratMatr<span class="sc">@</span>data)</span></code></pre></div>
<ul>
<li class="downarrow">
評分為0~8，包含小數
</li>
</ul>
<p>7跟8怎麼來的(*´･д･)?</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="self-learning-2.html#cb303-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">list</span>(<span class="fu">data.frame</span>(<span class="fu">table</span>(rat), <span class="at">row.names =</span> <span class="cn">NULL</span>),</span>
<span id="cb303-2"><a href="self-learning-2.html#cb303-2" tabindex="-1"></a>                  <span class="fu">data.frame</span>(<span class="fu">table</span>(df<span class="sc">$</span>rating))),</span>
<span id="cb303-3"><a href="self-learning-2.html#cb303-3" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">&quot;Rating Matrix (左) &amp; Raw data (右)&quot;</span>)</span></code></pre></div>
<table class="kable_wrapper">
<caption>
<span id="tab:unnamed-chunk-170">Table 6.1: </span>Rating Matrix (左) &amp; Raw data (右)
</caption>
<tbody>
<tr>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
rat
</th>
<th style="text-align:right;">
Freq
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
0
</td>
<td style="text-align:right;">
5827758
</td>
</tr>
<tr>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:right;">
1370
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:right;">
2811
</td>
</tr>
<tr>
<td style="text-align:left;">
1.5
</td>
<td style="text-align:right;">
1791
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:right;">
7550
</td>
</tr>
<tr>
<td style="text-align:left;">
2.5
</td>
<td style="text-align:right;">
5549
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:right;">
20047
</td>
</tr>
<tr>
<td style="text-align:left;">
3.5
</td>
<td style="text-align:right;">
13132
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
26816
</td>
</tr>
<tr>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:right;">
8552
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:right;">
13211
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</td>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
Var1
</th>
<th style="text-align:right;">
Freq
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:right;">
1370
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:right;">
2811
</td>
</tr>
<tr>
<td style="text-align:left;">
1.5
</td>
<td style="text-align:right;">
1791
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:right;">
7551
</td>
</tr>
<tr>
<td style="text-align:left;">
2.5
</td>
<td style="text-align:right;">
5550
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:right;">
20047
</td>
</tr>
<tr>
<td style="text-align:left;">
3.5
</td>
<td style="text-align:right;">
13136
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
26818
</td>
</tr>
<tr>
<td style="text-align:left;">
4.5
</td>
<td style="text-align:right;">
8551
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:right;">
13211
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>從資料發現有些使用者對同一部影片評了兩次，另外這些電影都出現在前面提到的同名不同ID的電影裡，使用者評了兩次有可能是評了不同類型但相同片名的電影。</p>
<p>出現7跟8可能是因為在轉換物件類型時，realRatingMatrix把同個使用者評分同一部電影的評分加總了</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="self-learning-2.html#cb304-1" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(userId, title) <span class="sc">%&gt;%</span> </span>
<span id="cb304-2"><a href="self-learning-2.html#cb304-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 3
## # Groups:   userId, title [4]
##   userId title                                  rating
##    &lt;int&gt; &lt;chr&gt;                                   &lt;dbl&gt;
## 1     28 War of the Worlds (2005)                  3.5
## 2     28 War of the Worlds (2005)                  3.5
## 3     68 War of the Worlds (2005)                  2  
## 4     68 War of the Worlds (2005)                  2.5
## 5    111 Confessions of a Dangerous Mind (2002)    4  
## 6    111 Confessions of a Dangerous Mind (2002)    4  
## 7    509 Emma (1996)                               3.5
## 8    509 Emma (1996)                               3.5</code></pre>
<ul>
<li class="downarrow">
根據文件，評分採用5星評分制，以半星為單位 (0.5 stars - 5.0 stars)，因此移除其他數值
</li>
</ul>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="self-learning-2.html#cb306-1" tabindex="-1"></a>rat <span class="ot">&lt;-</span> rat[rat <span class="sc">%in%</span> <span class="fu">seq</span>(<span class="fl">0.5</span>,<span class="dv">5</span>,<span class="at">by=</span><span class="fl">0.5</span>)]</span></code></pre></div>
<ul>
<li class="downarrow">
大部分的評分為3, 4星
</li>
</ul>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="self-learning-2.html#cb307-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb307-2"><a href="self-learning-2.html#cb307-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">data.frame</span>(rat), <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(rat)))<span class="sc">+</span></span>
<span id="cb307-3"><a href="self-learning-2.html#cb307-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>()<span class="sc">+</span></span>
<span id="cb307-4"><a href="self-learning-2.html#cb307-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribution of the ratings&quot;</span>,</span>
<span id="cb307-5"><a href="self-learning-2.html#cb307-5" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Ratings&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-173-1.png" width="1152" style="display: block; margin: auto;" /></p>
<ul>
<li class="downarrow">
Star Wars有最高的觀看數
</li>
</ul>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="self-learning-2.html#cb308-1" tabindex="-1"></a>views <span class="ot">&lt;-</span> <span class="fu">colCounts</span>(ratMatr)</span>
<span id="cb308-2"><a href="self-learning-2.html#cb308-2" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb308-3"><a href="self-learning-2.html#cb308-3" tabindex="-1"></a>  <span class="at">movie=</span><span class="fu">names</span>(views),</span>
<span id="cb308-4"><a href="self-learning-2.html#cb308-4" tabindex="-1"></a>  <span class="at">views=</span>views</span>
<span id="cb308-5"><a href="self-learning-2.html#cb308-5" tabindex="-1"></a>)</span>
<span id="cb308-6"><a href="self-learning-2.html#cb308-6" tabindex="-1"></a>tab <span class="ot">&lt;-</span> tab[<span class="fu">order</span>(tab<span class="sc">$</span>views, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb308-7"><a href="self-learning-2.html#cb308-7" tabindex="-1"></a></span>
<span id="cb308-8"><a href="self-learning-2.html#cb308-8" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">head</span>(tab), <span class="fu">aes</span>(<span class="at">x=</span>movie, <span class="at">y=</span>views))<span class="sc">+</span></span>
<span id="cb308-9"><a href="self-learning-2.html#cb308-9" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>)<span class="sc">+</span></span>
<span id="cb308-10"><a href="self-learning-2.html#cb308-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb308-11"><a href="self-learning-2.html#cb308-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Number of views of the top movies&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-174-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<div id="adjust-plot-output" class="section level3 hasAnchor" number="6.1.3">
<h3><span class="header-section-number">6.1.3</span> Adjust plot output<a href="self-learning-2.html#adjust-plot-output" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Please sort the x-axis by views, rather than by alphabet.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="self-learning-2.html#cb309-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">head</span>(tab), <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(movie,views,sum, <span class="at">decreasing=</span>T), <span class="at">y=</span>views))<span class="sc">+</span></span>
<span id="cb309-2"><a href="self-learning-2.html#cb309-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>)<span class="sc">+</span></span>
<span id="cb309-3"><a href="self-learning-2.html#cb309-3" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb309-4"><a href="self-learning-2.html#cb309-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Number of views of the top movies&quot;</span>,</span>
<span id="cb309-5"><a href="self-learning-2.html#cb309-5" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;movie&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-175-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<div id="average-ratings-1" class="section level3 hasAnchor" number="6.1.4">
<h3><span class="header-section-number">6.1.4</span> Average Ratings<a href="self-learning-2.html#average-ratings-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li class="downarrow">
大部分電影的平均評分在3.5左右，其中有些評分為1或5，可能是因為只有少數人評分
</li>
</ul>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="self-learning-2.html#cb310-1" tabindex="-1"></a>avg_rat <span class="ot">&lt;-</span> <span class="fu">colMeans</span>(ratMatr)</span>
<span id="cb310-2"><a href="self-learning-2.html#cb310-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">data.frame</span>(avg_rat), <span class="fu">aes</span>(<span class="at">x=</span>avg_rat))<span class="sc">+</span></span>
<span id="cb310-3"><a href="self-learning-2.html#cb310-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()<span class="sc">+</span></span>
<span id="cb310-4"><a href="self-learning-2.html#cb310-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Distribution of the average movie rating&quot;</span>,</span>
<span id="cb310-5"><a href="self-learning-2.html#cb310-5" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Average Ratings&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-176-1.png" width="1152" style="display: block; margin: auto;" /></p>
<ul>
<li class="downarrow">
保留超過50和100人觀看的電影
</li>
</ul>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="self-learning-2.html#cb311-1" tabindex="-1"></a><span class="fu">quantile</span>(views, .<span class="dv">95</span>); <span class="fu">quantile</span>(views, .<span class="dv">99</span>)</span></code></pre></div>
<pre><code>## 95% 
##  47</code></pre>
<pre><code>## 99% 
## 115</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="self-learning-2.html#cb314-1" tabindex="-1"></a>avg_rat_95 <span class="ot">&lt;-</span> avg_rat[views <span class="sc">&gt;</span> <span class="dv">50</span>]</span>
<span id="cb314-2"><a href="self-learning-2.html#cb314-2" tabindex="-1"></a>avg_rat_99 <span class="ot">&lt;-</span> avg_rat[views <span class="sc">&gt;</span> <span class="dv">100</span>]</span></code></pre></div>
<ul>
<li class="downarrow">
移除少數人觀看的電影後，大部分電影的平均評分在3.8左右
</li>
</ul>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="self-learning-2.html#cb315-1" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">data.frame</span>(avg_rat_99), <span class="fu">aes</span>(<span class="at">x=</span>avg_rat_99))<span class="sc">+</span></span>
<span id="cb315-2"><a href="self-learning-2.html#cb315-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()<span class="sc">+</span></span>
<span id="cb315-3"><a href="self-learning-2.html#cb315-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Top 1% views average ratings&quot;</span>,</span>
<span id="cb315-4"><a href="self-learning-2.html#cb315-4" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Average Ratings for views_per_movie &gt; 100&quot;</span>)</span>
<span id="cb315-5"><a href="self-learning-2.html#cb315-5" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">data.frame</span>(avg_rat_95), <span class="fu">aes</span>(<span class="at">x=</span>avg_rat_95))<span class="sc">+</span></span>
<span id="cb315-6"><a href="self-learning-2.html#cb315-6" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()<span class="sc">+</span></span>
<span id="cb315-7"><a href="self-learning-2.html#cb315-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Top 5% views average ratings&quot;</span>,</span>
<span id="cb315-8"><a href="self-learning-2.html#cb315-8" tabindex="-1"></a>       <span class="at">x=</span><span class="st">&quot;Average Ratings for views_per_movie &gt; 50&quot;</span>)</span>
<span id="cb315-9"><a href="self-learning-2.html#cb315-9" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb315-10"><a href="self-learning-2.html#cb315-10" tabindex="-1"></a><span class="fu">grid.arrange</span>(p1, p2, <span class="at">nrow=</span><span class="dv">1</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-178-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<div id="rating-matrix-1" class="section level3 hasAnchor" number="6.1.5">
<h3><span class="header-section-number">6.1.5</span> Rating Matrix<a href="self-learning-2.html#rating-matrix-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li class="downarrow">
保留大多人評分的電影和評分大多電影的人
</li>
</ul>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="self-learning-2.html#cb316-1" tabindex="-1"></a>min_movies <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">rowCounts</span>(ratMatr), <span class="fl">0.995</span>)</span>
<span id="cb316-2"><a href="self-learning-2.html#cb316-2" tabindex="-1"></a>min_users <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">colCounts</span>(ratMatr), <span class="fl">0.995</span>)</span>
<span id="cb316-3"><a href="self-learning-2.html#cb316-3" tabindex="-1"></a><span class="fu">image</span>(ratMatr[<span class="fu">rowCounts</span>(ratMatr) <span class="sc">&gt;</span> min_movies, <span class="fu">colCounts</span>(ratMatr) <span class="sc">&gt;</span> min_users],</span>
<span id="cb316-4"><a href="self-learning-2.html#cb316-4" tabindex="-1"></a>      <span class="at">main =</span> <span class="st">&quot;Heatmap of the top 0.5% users and movies&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-179-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<div id="normalize-1" class="section level3 hasAnchor" number="6.1.6">
<h3><span class="header-section-number">6.1.6</span> Normalize<a href="self-learning-2.html#normalize-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li class="downarrow">
保留評分超過400部電影的使用者和被超過100人評分的電影
</li>
</ul>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="self-learning-2.html#cb317-1" tabindex="-1"></a><span class="fu">quantile</span>(<span class="fu">rowCounts</span>(ratMatr), .<span class="dv">9</span>)</span></code></pre></div>
<pre><code>## 90% 
## 400</code></pre>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="self-learning-2.html#cb319-1" tabindex="-1"></a><span class="fu">quantile</span>(<span class="fu">colCounts</span>(ratMatr), .<span class="dv">99</span>)</span></code></pre></div>
<pre><code>## 99% 
## 115</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="self-learning-2.html#cb321-1" tabindex="-1"></a>rat_movies <span class="ot">&lt;-</span> ratMatr[<span class="fu">rowCounts</span>(ratMatr) <span class="sc">&gt;</span> <span class="dv">400</span>,</span>
<span id="cb321-2"><a href="self-learning-2.html#cb321-2" tabindex="-1"></a>                      <span class="fu">colCounts</span>(ratMatr) <span class="sc">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb321-3"><a href="self-learning-2.html#cb321-3" tabindex="-1"></a></span>
<span id="cb321-4"><a href="self-learning-2.html#cb321-4" tabindex="-1"></a>min_movies <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">rowCounts</span>(rat_movies), .<span class="dv">9</span>)</span>
<span id="cb321-5"><a href="self-learning-2.html#cb321-5" tabindex="-1"></a>min_users <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">colCounts</span>(rat_movies), .<span class="dv">9</span>)</span></code></pre></div>
<ul>
<li class="downarrow">
Normalize
</li>
</ul>
<pre><code>normalize(x, method=&quot;center&quot;, row=TRUE)</code></pre>
<ul>
<li><code>method</code>: “center”(減平均) or “Z-score”(再除標準差)</li>
</ul>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="self-learning-2.html#cb323-1" tabindex="-1"></a>rat_movies_norm <span class="ot">&lt;-</span> <span class="fu">normalize</span>(rat_movies)</span>
<span id="cb323-2"><a href="self-learning-2.html#cb323-2" tabindex="-1"></a><span class="fu">image</span>(rat_movies_norm[<span class="fu">rowCounts</span>(rat_movies_norm) <span class="sc">&gt;</span> min_movies,</span>
<span id="cb323-3"><a href="self-learning-2.html#cb323-3" tabindex="-1"></a>                      <span class="fu">colCounts</span>(rat_movies_norm) <span class="sc">&gt;</span> min_users],</span>
<span id="cb323-4"><a href="self-learning-2.html#cb323-4" tabindex="-1"></a>      <span class="at">main =</span> <span class="st">&quot;Heatmap of the top 10% users and movies&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-181-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<div id="binarization-1" class="section level3 hasAnchor" number="6.1.7">
<h3><span class="header-section-number">6.1.7</span> Binarization<a href="self-learning-2.html#binarization-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li class="downarrow">
二元分類
</li>
</ul>
<pre><code>binarize(ratingMatrix, minRating = n)</code></pre>
<ul>
<li><code>minRating</code>: 評分大於等於minRating的為1，其餘為0</li>
</ul>
<ul>
<li class="downarrow">
評分4(含)以上的為1，其餘為0
</li>
</ul>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="self-learning-2.html#cb325-1" tabindex="-1"></a>rat_movies_watched <span class="ot">&lt;-</span> <span class="fu">binarize</span>(rat_movies, <span class="at">minRating =</span> <span class="dv">4</span>)</span>
<span id="cb325-2"><a href="self-learning-2.html#cb325-2" tabindex="-1"></a><span class="fu">image</span>(rat_movies_watched[<span class="fu">rowCounts</span>(rat_movies) <span class="sc">&gt;</span> min_movies,</span>
<span id="cb325-3"><a href="self-learning-2.html#cb325-3" tabindex="-1"></a>                         <span class="fu">colCounts</span>(rat_movies) <span class="sc">&gt;</span> min_users],</span>
<span id="cb325-4"><a href="self-learning-2.html#cb325-4" tabindex="-1"></a>      <span class="at">main =</span> <span class="st">&quot;Heatmap of the top 10% users and movies&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-182-1.png" width="1152" style="display: block; margin: auto;" /></p>
<hr />
</div>
</div>
<div id="cf-movielens" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> [CF] MovieLens<a href="self-learning-2.html#cf-movielens" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="self-learning-2.html#cb326-1" tabindex="-1"></a>temp<span class="ot">=</span><span class="fu">read.csv</span>(<span class="st">&quot;data/MovieLense.csv&quot;</span>)</span>
<span id="cb326-2"><a href="self-learning-2.html#cb326-2" tabindex="-1"></a>MovieLense<span class="ot">=</span><span class="fu">as</span>(temp,<span class="st">&quot;realRatingMatrix&quot;</span>)</span>
<span id="cb326-3"><a href="self-learning-2.html#cb326-3" tabindex="-1"></a>ratings_movies <span class="ot">&lt;-</span> MovieLense[<span class="fu">rowCounts</span>(MovieLense) <span class="sc">&gt;</span> <span class="dv">50</span>,</span>
<span id="cb326-4"><a href="self-learning-2.html#cb326-4" tabindex="-1"></a>                             <span class="fu">colCounts</span>(MovieLense) <span class="sc">&gt;</span> <span class="dv">100</span>]</span>
<span id="cb326-5"><a href="self-learning-2.html#cb326-5" tabindex="-1"></a></span>
<span id="cb326-6"><a href="self-learning-2.html#cb326-6" tabindex="-1"></a>detail <span class="ot">&lt;-</span> <span class="fu">Recommender</span>(<span class="at">data =</span> ratings_movies, <span class="at">method =</span> <span class="st">&quot;IBCF&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb326-7"><a href="self-learning-2.html#cb326-7" tabindex="-1"></a>  <span class="fu">getModel</span>()</span>
<span id="cb326-8"><a href="self-learning-2.html#cb326-8" tabindex="-1"></a>sim <span class="ot">&lt;-</span> detail<span class="sc">$</span>sim <span class="sc">|&gt;</span> <span class="fu">as.matrix</span>()</span>
<span id="cb326-9"><a href="self-learning-2.html#cb326-9" tabindex="-1"></a><span class="co"># sim &lt;- ifelse(sim==0, NA, sim)</span></span></code></pre></div>
<div id="problem1" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> Use <code>similarity()</code> to recheck <a href="collaborative-filtering.html#hand-on-problem-1">Hand-on problem 1</a><a href="self-learning-2.html#problem1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="self-learning-2.html#cb327-1" tabindex="-1"></a>similarity_items <span class="ot">&lt;-</span> <span class="fu">similarity</span>(ratings_movies,</span>
<span id="cb327-2"><a href="self-learning-2.html#cb327-2" tabindex="-1"></a>                               <span class="at">method =</span> <span class="st">&quot;cosine&quot;</span>,</span>
<span id="cb327-3"><a href="self-learning-2.html#cb327-3" tabindex="-1"></a>                               <span class="at">which =</span> <span class="st">&quot;items&quot;</span>)</span>
<span id="cb327-4"><a href="self-learning-2.html#cb327-4" tabindex="-1"></a>X<span class="ot">=</span><span class="fu">as.matrix</span>(similarity_items)</span></code></pre></div>
<ul>
<li>避開Sim=1的部分</li>
<li>每列取前30個</li>
</ul>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="self-learning-2.html#cb328-1" tabindex="-1"></a><span class="fu">class</span>(X)</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="self-learning-2.html#cb330-1" tabindex="-1"></a>X[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pander</span>(<span class="at">row.names=</span>F)</span></code></pre></div>
<table>
<colgroup>
<col width="31%" />
<col width="28%" />
<col width="40%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">101 Dalmatians (1996)</th>
<th align="center">12 Angry Men (1957)</th>
<th align="center">2001: A Space Odyssey (1968)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">NA</td>
<td align="center">0.9491</td>
<td align="center">0.9378</td>
</tr>
<tr class="even">
<td align="center">0.9491</td>
<td align="center">NA</td>
<td align="center">0.9821</td>
</tr>
<tr class="odd">
<td align="center">0.9378</td>
<td align="center">0.9821</td>
<td align="center">NA</td>
</tr>
</tbody>
</table>
<p>我們可以看到<code>similarity</code>計算出來自己跟自己的相似度為NA，因此不用擔心取前30個最相似的電影會挑到自己</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="self-learning-2.html#cb331-1" tabindex="-1"></a>top30 <span class="ot">&lt;-</span> <span class="fu">apply</span>(X, <span class="dv">1</span>, <span class="cf">function</span>(x){</span>
<span id="cb331-2"><a href="self-learning-2.html#cb331-2" tabindex="-1"></a>  top_val <span class="ot">&lt;-</span> <span class="fu">sort</span>(x, <span class="at">decreasing =</span> T) <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">30</span>)</span>
<span id="cb331-3"><a href="self-learning-2.html#cb331-3" tabindex="-1"></a>  out <span class="ot">&lt;-</span> x</span>
<span id="cb331-4"><a href="self-learning-2.html#cb331-4" tabindex="-1"></a>  out[<span class="sc">!</span>(x <span class="sc">%in%</span> top_val)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb331-5"><a href="self-learning-2.html#cb331-5" tabindex="-1"></a>  <span class="fu">return</span>(out)</span>
<span id="cb331-6"><a href="self-learning-2.html#cb331-6" tabindex="-1"></a>}) <span class="sc">|&gt;</span> <span class="fu">t</span>()</span>
<span id="cb331-7"><a href="self-learning-2.html#cb331-7" tabindex="-1"></a></span>
<span id="cb331-8"><a href="self-learning-2.html#cb331-8" tabindex="-1"></a><span class="fu">apply</span>(top30,<span class="dv">1</span>,<span class="cf">function</span>(x) <span class="fu">sum</span>(x<span class="sc">&gt;</span><span class="dv">0</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> <span class="fu">table</span>()</span></code></pre></div>
<pre><code>## 
##  30 
## 332</code></pre>
<p>確認每列都只有保留30個相似度</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="self-learning-2.html#cb333-1" tabindex="-1"></a><span class="fu">identical</span>(top30, sim)</span>
<span id="cb333-2"><a href="self-learning-2.html#cb333-2" tabindex="-1"></a>top30[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pander</span>(<span class="at">row.names=</span>F)</span>
<span id="cb333-3"><a href="self-learning-2.html#cb333-3" tabindex="-1"></a>sim[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pander</span>(<span class="at">row.names=</span>F)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<table>
<colgroup>
<col width="31%" />
<col width="28%" />
<col width="40%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">101 Dalmatians (1996)</th>
<th align="center">12 Angry Men (1957)</th>
<th align="center">2001: A Space Odyssey (1968)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">NA</td>
<td align="center">0.9821</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col width="31%" />
<col width="28%" />
<col width="40%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">101 Dalmatians (1996)</th>
<th align="center">12 Angry Men (1957)</th>
<th align="center">2001: A Space Odyssey (1968)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0.6645</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<div id="normalize-2" class="section level4 unnumbered hasAnchor">
<h4>Normalize<a href="self-learning-2.html#normalize-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>但是和使用<code>Recommender</code>得到的相似度不一樣，從表<a href="collaborative-filtering.html#tab:parameter-tab">5.1</a>可以看到normalize預設是”center”，因此我們嘗試先把資料的平均歸到0。</p>
<pre><code>normalize(x, method=&quot;center&quot;, row=TRUE)</code></pre>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="self-learning-2.html#cb336-1" tabindex="-1"></a>center_ratings_movies <span class="ot">&lt;-</span> <span class="fu">normalize</span>(ratings_movies)</span>
<span id="cb336-2"><a href="self-learning-2.html#cb336-2" tabindex="-1"></a>center_X <span class="ot">&lt;-</span> <span class="fu">similarity</span>(center_ratings_movies,</span>
<span id="cb336-3"><a href="self-learning-2.html#cb336-3" tabindex="-1"></a>                       <span class="at">method =</span> <span class="st">&quot;cosine&quot;</span>,</span>
<span id="cb336-4"><a href="self-learning-2.html#cb336-4" tabindex="-1"></a>                       <span class="at">which =</span> <span class="st">&quot;items&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb336-5"><a href="self-learning-2.html#cb336-5" tabindex="-1"></a>  <span class="fu">as.matrix</span>()</span>
<span id="cb336-6"><a href="self-learning-2.html#cb336-6" tabindex="-1"></a></span>
<span id="cb336-7"><a href="self-learning-2.html#cb336-7" tabindex="-1"></a>center_top30 <span class="ot">&lt;-</span> <span class="fu">apply</span>(center_X, <span class="dv">1</span>, <span class="cf">function</span>(x){</span>
<span id="cb336-8"><a href="self-learning-2.html#cb336-8" tabindex="-1"></a>  top_val <span class="ot">&lt;-</span> <span class="fu">sort</span>(x, <span class="at">decreasing =</span> T) <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">30</span>)</span>
<span id="cb336-9"><a href="self-learning-2.html#cb336-9" tabindex="-1"></a>  out <span class="ot">&lt;-</span> x</span>
<span id="cb336-10"><a href="self-learning-2.html#cb336-10" tabindex="-1"></a>  out[<span class="sc">!</span>(x <span class="sc">%in%</span> top_val)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb336-11"><a href="self-learning-2.html#cb336-11" tabindex="-1"></a>  <span class="fu">return</span>(out)</span>
<span id="cb336-12"><a href="self-learning-2.html#cb336-12" tabindex="-1"></a>}) <span class="sc">|&gt;</span> <span class="fu">t</span>()</span>
<span id="cb336-13"><a href="self-learning-2.html#cb336-13" tabindex="-1"></a><span class="fu">identical</span>(center_top30, sim)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>可以發現把realRatingMatrix中每列都正規化到平均為0後，再計算相似度就可以得到和<code>Recommender</code>一樣的數值</p>
<hr />
</div>
</div>
<div id="similarity-try-using-robust-statistic" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> Similarity: try using robust statistic<a href="self-learning-2.html#similarity-try-using-robust-statistic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>(skip)</p>
<hr />
</div>
<div id="why-the-following-code-get-different-results-between-hand-on-problem-2" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> Why the following code get different results between <a href="collaborative-filtering.html#hand-on-problem-2">Hand-on problem 2</a><a href="self-learning-2.html#why-the-following-code-get-different-results-between-hand-on-problem-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="self-learning-2.html#cb338-1" tabindex="-1"></a>ratingTest<span class="ot">=</span><span class="fu">as</span>(ratings_movies,<span class="st">&quot;matrix&quot;</span>)</span>
<span id="cb338-2"><a href="self-learning-2.html#cb338-2" tabindex="-1"></a>rating.test <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ratingTest),<span class="dv">0</span>,ratingTest)</span>
<span id="cb338-3"><a href="self-learning-2.html#cb338-3" tabindex="-1"></a></span>
<span id="cb338-4"><a href="self-learning-2.html#cb338-4" tabindex="-1"></a><span class="co"># dim(rating.test) # 560 x 332</span></span>
<span id="cb338-5"><a href="self-learning-2.html#cb338-5" tabindex="-1"></a><span class="co"># dim(as.matrix(detail$sim)) # 332 x 332</span></span>
<span id="cb338-6"><a href="self-learning-2.html#cb338-6" tabindex="-1"></a><span class="co"># dim(sim) # 332 x 332</span></span>
<span id="cb338-7"><a href="self-learning-2.html#cb338-7" tabindex="-1"></a></span>
<span id="cb338-8"><a href="self-learning-2.html#cb338-8" tabindex="-1"></a>Recom<span class="ot">=</span>rating.test <span class="sc">%*%</span> sim</span>
<span id="cb338-9"><a href="self-learning-2.html#cb338-9" tabindex="-1"></a><span class="co"># dim(Recom) # 560 x 332</span></span></code></pre></div>
<p>表<a href="self-learning-2.html#tab:self-result1">6.2</a>列出了上面程式碼中計算的結果，可以看到和<code>Recommender</code>推薦的結果(表<a href="collaborative-filtering.html#tab:IBCF-tab2">5.3</a>)不太一樣</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="self-learning-2.html#cb339-1" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb339-2"><a href="self-learning-2.html#cb339-2" tabindex="-1"></a>  <span class="at">movie =</span> Recom[<span class="dv">1</span>,][<span class="fu">order</span>(Recom[<span class="dv">1</span>,], <span class="at">decreasing =</span> <span class="cn">TRUE</span>)][<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb339-3"><a href="self-learning-2.html#cb339-3" tabindex="-1"></a>) <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">&quot;前6部推薦的電影&quot;</span>)</span></code></pre></div>
<table>
<caption>
<span id="tab:self-result1">Table 6.2: </span>前6部推薦的電影
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
movie
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Close Shave, A (1995)
</td>
<td style="text-align:right;">
155
</td>
</tr>
<tr>
<td style="text-align:left;">
Wrong Trousers, The (1993)
</td>
<td style="text-align:right;">
147
</td>
</tr>
<tr>
<td style="text-align:left;">
Chasing Amy (1997)
</td>
<td style="text-align:right;">
134
</td>
</tr>
<tr>
<td style="text-align:left;">
Usual Suspects, The (1995)
</td>
<td style="text-align:right;">
123
</td>
</tr>
<tr>
<td style="text-align:left;">
Shawshank Redemption, The (1994)
</td>
<td style="text-align:right;">
114
</td>
</tr>
<tr>
<td style="text-align:left;">
Good Will Hunting (1997)
</td>
<td style="text-align:right;">
110
</td>
</tr>
</tbody>
</table>
<hr />
<p>從<a href="self-learning-2.html#problem1">這一節</a>中可以知道<code>Recommender</code>的預設是會對資料先進行正規化的，所以這邊也同樣先嘗試對<code>ratings_movies</code>正規化後得到<code>center_ratings_movies</code></p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="self-learning-2.html#cb340-1" tabindex="-1"></a>ratingTest<span class="ot">=</span><span class="fu">as</span>(center_ratings_movies,<span class="st">&quot;matrix&quot;</span>)</span>
<span id="cb340-2"><a href="self-learning-2.html#cb340-2" tabindex="-1"></a>norm_rating.test <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ratingTest),<span class="dv">0</span>,ratingTest)</span>
<span id="cb340-3"><a href="self-learning-2.html#cb340-3" tabindex="-1"></a></span>
<span id="cb340-4"><a href="self-learning-2.html#cb340-4" tabindex="-1"></a>new_Recom<span class="ot">=</span>norm_rating.test <span class="sc">%*%</span> sim</span></code></pre></div>
<p>表<a href="self-learning-2.html#tab:self-result2">6.3</a>列出了正規化後的結果，可以看到和表<a href="self-learning-2.html#tab:self-result1">6.2</a>相比只有一個不同</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="self-learning-2.html#cb341-1" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb341-2"><a href="self-learning-2.html#cb341-2" tabindex="-1"></a>  <span class="at">movie =</span> new_Recom[<span class="dv">1</span>,][<span class="fu">order</span>(new_Recom[<span class="dv">1</span>,], <span class="at">decreasing =</span> <span class="cn">TRUE</span>)][<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb341-3"><a href="self-learning-2.html#cb341-3" tabindex="-1"></a>) <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">&quot;正規化後前6部推薦的電影&quot;</span>)</span></code></pre></div>
<table>
<caption>
<span id="tab:self-result2">Table 6.3: </span>正規化後前6部推薦的電影
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
movie
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Wrong Trousers, The (1993)
</td>
<td style="text-align:right;">
23
</td>
</tr>
<tr>
<td style="text-align:left;">
Close Shave, A (1995)
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
Sling Blade (1996)
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Chasing Amy (1997)
</td>
<td style="text-align:right;">
18
</td>
</tr>
<tr>
<td style="text-align:left;">
Star Wars (1977)
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
Usual Suspects, The (1995)
</td>
<td style="text-align:right;">
16
</td>
</tr>
</tbody>
</table>
<hr />
<p>從得到的<code>Recom</code>可以發現它計算了所有的評分，也就是說它把已經看過的電影也一起計算了</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="self-learning-2.html#cb342-1" tabindex="-1"></a><span class="fu">is.na</span>(Recom) <span class="sc">|&gt;</span> <span class="fu">table</span>()</span></code></pre></div>
<pre><code>## 
##  FALSE 
## 185920</code></pre>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="self-learning-2.html#cb344-1" tabindex="-1"></a>rat.mat1 <span class="ot">&lt;-</span> <span class="fu">as</span>(ratings_movies[<span class="dv">1</span>,], <span class="st">&quot;matrix&quot;</span>)</span>
<span id="cb344-2"><a href="self-learning-2.html#cb344-2" tabindex="-1"></a>movie1 <span class="ot">&lt;-</span> rat.mat1 <span class="sc">|&gt;</span> <span class="fu">colnames</span>()</span>
<span id="cb344-3"><a href="self-learning-2.html#cb344-3" tabindex="-1"></a>rat.mat1[,<span class="fu">c</span>(<span class="st">&quot;Wrong Trousers, The (1993)&quot;</span>,<span class="st">&quot;Close Shave, A (1995)&quot;</span>)]</span></code></pre></div>
<pre><code>## Wrong Trousers, The (1993)      Close Shave, A (1995) 
##                          5                         NA</code></pre>
<p>我們可以看到是”Wrong Trousers, The (1993)“已經被評過分了，所以在查看時要先排除已經被看過的電影</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="self-learning-2.html#cb346-1" tabindex="-1"></a>recc1 <span class="ot">&lt;-</span> Recom[<span class="dv">1</span>,][<span class="fu">is.na</span>(rat.mat1)]</span>
<span id="cb346-2"><a href="self-learning-2.html#cb346-2" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb346-3"><a href="self-learning-2.html#cb346-3" tabindex="-1"></a>  <span class="at">movie =</span> recc1[<span class="fu">order</span>(recc1, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)][<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb346-4"><a href="self-learning-2.html#cb346-4" tabindex="-1"></a>) <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">&quot;未正規化&quot;</span>)</span>
<span id="cb346-5"><a href="self-learning-2.html#cb346-5" tabindex="-1"></a></span>
<span id="cb346-6"><a href="self-learning-2.html#cb346-6" tabindex="-1"></a>new_recc1 <span class="ot">&lt;-</span> new_Recom[<span class="dv">1</span>,][<span class="fu">is.na</span>(rat.mat1)]</span>
<span id="cb346-7"><a href="self-learning-2.html#cb346-7" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb346-8"><a href="self-learning-2.html#cb346-8" tabindex="-1"></a>  <span class="at">movie =</span> new_recc1[<span class="fu">order</span>(new_recc1, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)][<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb346-9"><a href="self-learning-2.html#cb346-9" tabindex="-1"></a>) <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">&quot;正規化&quot;</span>)</span></code></pre></div>
<table>
<caption>
<span id="tab:unnamed-chunk-192">Table 6.4: </span>未正規化
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
movie
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Close Shave, A (1995)
</td>
<td style="text-align:right;">
155
</td>
</tr>
<tr>
<td style="text-align:left;">
Casablanca (1942)
</td>
<td style="text-align:right;">
102
</td>
</tr>
<tr>
<td style="text-align:left;">
Lawrence of Arabia (1962)
</td>
<td style="text-align:right;">
101
</td>
</tr>
<tr>
<td style="text-align:left;">
As Good As It Gets (1997)
</td>
<td style="text-align:right;">
97
</td>
</tr>
<tr>
<td style="text-align:left;">
Manchurian Candidate, The (1962)
</td>
<td style="text-align:right;">
95
</td>
</tr>
<tr>
<td style="text-align:left;">
Secrets &amp; Lies (1996)
</td>
<td style="text-align:right;">
93
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:unnamed-chunk-192">Table 6.4: </span>正規化
</caption>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
movie
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Close Shave, A (1995)
</td>
<td style="text-align:right;">
19
</td>
</tr>
<tr>
<td style="text-align:left;">
Casablanca (1942)
</td>
<td style="text-align:right;">
14
</td>
</tr>
<tr>
<td style="text-align:left;">
Schindler’s List (1993)
</td>
<td style="text-align:right;">
13
</td>
</tr>
<tr>
<td style="text-align:left;">
L.A. Confidential (1997)
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
Lawrence of Arabia (1962)
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
Rear Window (1954)
</td>
<td style="text-align:right;">
11
</td>
</tr>
</tbody>
</table>
<p>兩種結果只有2部電影不同，和<code>Recommender</code>推薦相同的只有”Casablanca (1942)“和”Schindler’s List (1993)“兩部</p>
<hr />
<p>根據表<a href="collaborative-filtering.html#tab:parameter-tab">5.1</a>可以看到參數中還有一個<span class="math inline">\(\alpha\)</span>預設為0.5，<a href="https://stats.stackexchange.com/questions/104811/what-does-the-parameter-alpha-do-in-the-jaccard-method-for-binaryratingsmatri">這裡</a>提到<span class="math inline">\(\alpha\)</span>被用來排除項目預測因子，以減少熱門項目的偏見，並尋找更具區別性的項目。應該是一個懲罰項的作用</p>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="collaborative-filtering.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="final-project.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "night",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
