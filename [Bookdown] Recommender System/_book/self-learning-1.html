<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Sec 4 Self-learning | Recommender System</title>
  <meta name="description" content="Sec 4 Self-learning | Recommender System" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Sec 4 Self-learning | Recommender System" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Sec 4 Self-learning | Recommender System" />
  
  
  

<meta name="author" content="ZIH-YING, LI" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="association-rule.html"/>
<link rel="next" href="collaborative-filtering.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.30/datatables.js"></script>
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.4/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.4/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #2a211c;
    color: #bdae9d;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #bdae9d;  padding-left: 4px; }
div.sourceCode
  { color: #bdae9d; background-color: #2a211c; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffff00; } /* Alert */
code span.an { color: #0066ff; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #44aa43; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #43a8ed; font-weight: bold; } /* ControlFlow */
code span.ch { color: #049b0a; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #0066ff; font-weight: bold; font-style: italic; } /* Comment */
code span.do { color: #0066ff; font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.dv { color: #44aa43; } /* DecVal */
code span.er { color: #ffff00; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #44aa43; } /* Float */
code span.fu { color: #ff9358; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #0066ff; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #43a8ed; font-weight: bold; } /* Keyword */
code span.op { } /* Operator */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.sc { color: #049b0a; } /* SpecialChar */
code span.ss { color: #049b0a; } /* SpecialString */
code span.st { color: #049b0a; } /* String */
code span.va { } /* Variable */
code span.vs { color: #049b0a; } /* VerbatimString */
code span.wa { color: #ffff00; font-weight: bold; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Recommender System</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="note.html"><a href="note.html"><i class="fa fa-check"></i>Note</a></li>
<li class="chapter" data-level="" data-path="problem.html"><a href="problem.html"><i class="fa fa-check"></i>Problem</a></li>
<li class="part"><span><b>I Conjoint Analysis</b></span></li>
<li class="chapter" data-level="1" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html"><i class="fa fa-check"></i><b>1</b> Conjoint Analysis</a>
<ul>
<li class="chapter" data-level="1.1" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#example"><i class="fa fa-check"></i><b>1.1</b> Example</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#preprocess"><i class="fa fa-check"></i><b>1.1.1</b> Preprocess</a></li>
<li class="chapter" data-level="1.1.2" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#compute-part-worth"><i class="fa fa-check"></i><b>1.1.2</b> Compute part-worth</a></li>
<li class="chapter" data-level="1.1.3" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#compute-relative-importance"><i class="fa fa-check"></i><b>1.1.3</b> Compute relative importance</a></li>
<li class="chapter" data-level="1.1.4" data-path="conjoint-analysis.html"><a href="conjoint-analysis.html#output"><i class="fa fa-check"></i><b>1.1.4</b> Output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="self-learning.html"><a href="self-learning.html"><i class="fa fa-check"></i><b>2</b> Self-learning</a>
<ul>
<li class="chapter" data-level="2.1" data-path="self-learning.html"><a href="self-learning.html#enter-new-ranking"><i class="fa fa-check"></i><b>2.1</b> Enter new ranking</a></li>
<li class="chapter" data-level="2.2" data-path="self-learning.html"><a href="self-learning.html#add-interaction"><i class="fa fa-check"></i><b>2.2</b> Add interaction</a></li>
<li class="chapter" data-level="2.3" data-path="self-learning.html"><a href="self-learning.html#rewrite-spine_chart.r"><i class="fa fa-check"></i><b>2.3</b> Rewrite spine_chart.R</a></li>
</ul></li>
<li class="part"><span><b>II Association Rule</b></span></li>
<li class="chapter" data-level="3" data-path="association-rule.html"><a href="association-rule.html"><i class="fa fa-check"></i><b>3</b> Association Rule</a>
<ul>
<li class="chapter" data-level="3.1" data-path="association-rule.html"><a href="association-rule.html#evaluation-metrics"><i class="fa fa-check"></i><b>3.1</b> Evaluation Metrics</a></li>
<li class="chapter" data-level="3.2" data-path="association-rule.html"><a href="association-rule.html#example-dvd"><i class="fa fa-check"></i><b>3.2</b> Example: DVD</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="association-rule.html"><a href="association-rule.html#prepare-data"><i class="fa fa-check"></i><b>3.2.1</b> Prepare data</a></li>
<li class="chapter" data-level="3.2.2" data-path="association-rule.html"><a href="association-rule.html#mining-rules"><i class="fa fa-check"></i><b>3.2.2</b> Mining rules</a></li>
<li class="chapter" data-level="3.2.3" data-path="association-rule.html"><a href="association-rule.html#by-apriori-get-rules"><i class="fa fa-check"></i><b>3.2.3</b> By Apriori get rules</a></li>
<li class="chapter" data-level="3.2.4" data-path="association-rule.html"><a href="association-rule.html#by-eclat-equivalence-class-clustering-and-bottom-up-lattice-traversal."><i class="fa fa-check"></i><b>3.2.4</b> By Eclat: Equivalence Class Clustering and bottom-up Lattice Traversal.</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="association-rule.html"><a href="association-rule.html#example-income"><i class="fa fa-check"></i><b>3.3</b> Example: Income</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="association-rule.html"><a href="association-rule.html#IFP-ex"><i class="fa fa-check"></i><b>3.3.1</b> explore data</a></li>
<li class="chapter" data-level="3.3.2" data-path="association-rule.html"><a href="association-rule.html#get-rules-with-apriori"><i class="fa fa-check"></i><b>3.3.2</b> get rules with apriori</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="association-rule.html"><a href="association-rule.html#處理多餘規則-example-groceries"><i class="fa fa-check"></i><b>3.4</b> [處理多餘規則] Example: Groceries</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="association-rule.html"><a href="association-rule.html#基本處理"><i class="fa fa-check"></i><b>3.4.1</b> 基本處理</a></li>
<li class="chapter" data-level="3.4.2" data-path="association-rule.html"><a href="association-rule.html#處理冗贅的規則"><i class="fa fa-check"></i><b>3.4.2</b> 處理冗贅的規則</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="self-learning-1.html"><a href="self-learning-1.html"><i class="fa fa-check"></i><b>4</b> Self-learning</a>
<ul>
<li class="chapter" data-level="4.1" data-path="self-learning-1.html"><a href="self-learning-1.html#check-details-of-income-data-set"><i class="fa fa-check"></i><b>4.1</b> check details of <code>Income</code> data set</a></li>
<li class="chapter" data-level="4.2" data-path="self-learning-1.html"><a href="self-learning-1.html#compare-different-grouping-regroup-income-into-2-levels"><i class="fa fa-check"></i><b>4.2</b> [compare different grouping] regroup income into 2 levels</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="self-learning-1.html"><a href="self-learning-1.html#explore-data"><i class="fa fa-check"></i><b>4.2.1</b> explore data</a></li>
<li class="chapter" data-level="4.2.2" data-path="self-learning-1.html"><a href="self-learning-1.html#explore-rule"><i class="fa fa-check"></i><b>4.2.2</b> explore rule</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="self-learning-1.html"><a href="self-learning-1.html#compare-different-algorithm-mine-rule-of-adultuci-data-set"><i class="fa fa-check"></i><b>4.3</b> [compare different algorithm] mine rule of <code>AdultUCI</code> data set</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="self-learning-1.html"><a href="self-learning-1.html#details-of-data"><i class="fa fa-check"></i><b>4.3.1</b> details of data</a></li>
<li class="chapter" data-level="4.3.2" data-path="self-learning-1.html"><a href="self-learning-1.html#explore-data-1"><i class="fa fa-check"></i><b>4.3.2</b> explore data</a></li>
<li class="chapter" data-level="4.3.3" data-path="self-learning-1.html"><a href="self-learning-1.html#explore-rule-1"><i class="fa fa-check"></i><b>4.3.3</b> explore rule</a></li>
<li class="chapter" data-level="4.3.4" data-path="self-learning-1.html"><a href="self-learning-1.html#conclusion"><i class="fa fa-check"></i><b>4.3.4</b> conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="self-learning-1.html"><a href="self-learning-1.html#就診紀錄"><i class="fa fa-check"></i><b>4.4</b> 就診紀錄</a></li>
<li class="chapter" data-level="4.5" data-path="self-learning-1.html"><a href="self-learning-1.html#早餐店購買紀錄"><i class="fa fa-check"></i><b>4.5</b> 早餐店購買紀錄</a></li>
<li class="chapter" data-level="4.6" data-path="self-learning-1.html"><a href="self-learning-1.html#groceries-data"><i class="fa fa-check"></i><b>4.6</b> Groceries data</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="self-learning-1.html"><a href="self-learning-1.html#rightarrow-item"><i class="fa fa-check"></i><b>4.6.1</b> ??? <span class="math inline">\(\rightarrow\)</span> item</a></li>
<li class="chapter" data-level="4.6.2" data-path="self-learning-1.html"><a href="self-learning-1.html#item-rightarrow"><i class="fa fa-check"></i><b>4.6.2</b> item <span class="math inline">\(\rightarrow\)</span> ???</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Collaborative filtering</b></span></li>
<li class="chapter" data-level="5" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html"><i class="fa fa-check"></i><b>5</b> Collaborative filtering</a>
<ul>
<li class="chapter" data-level="5.1" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#methods-for-realratingmatrix-class"><i class="fa fa-check"></i><b>5.1</b> Methods for “realRatingMatrix” Class</a></li>
<li class="chapter" data-level="5.2" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#compare-the-storage-sizes"><i class="fa fa-check"></i><b>5.2</b> Compare the storage sizes</a></li>
<li class="chapter" data-level="5.3" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#computie-similarity-matrix"><i class="fa fa-check"></i><b>5.3</b> Computie Similarity Matrix</a></li>
<li class="chapter" data-level="5.4" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#recommender-model"><i class="fa fa-check"></i><b>5.4</b> Recommender Model</a></li>
<li class="chapter" data-level="5.5" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>5.5</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#rating"><i class="fa fa-check"></i><b>5.5.1</b> Rating</a></li>
<li class="chapter" data-level="5.5.2" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#movie-views"><i class="fa fa-check"></i><b>5.5.2</b> Movie views</a></li>
<li class="chapter" data-level="5.5.3" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#average-ratings"><i class="fa fa-check"></i><b>5.5.3</b> Average ratings</a></li>
<li class="chapter" data-level="5.5.4" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#rating-matrix"><i class="fa fa-check"></i><b>5.5.4</b> Rating Matrix</a></li>
<li class="chapter" data-level="5.5.5" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#normalize"><i class="fa fa-check"></i><b>5.5.5</b> Normalize</a></li>
<li class="chapter" data-level="5.5.6" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#binarization"><i class="fa fa-check"></i><b>5.5.6</b> Binarization</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#rating-example-movie"><i class="fa fa-check"></i><b>5.6</b> [Rating] Example: Movie</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#IBCF"><i class="fa fa-check"></i><b>5.6.1</b> [Rating] Item-based Collaborative Filtering</a></li>
<li class="chapter" data-level="5.6.2" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#UBCF"><i class="fa fa-check"></i><b>5.6.2</b> [Rating] User-based Collaborative Filtering</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#binary-example-movie"><i class="fa fa-check"></i><b>5.7</b> [Binary] Example: Movie</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#binary-item-based-collaborative-filtering"><i class="fa fa-check"></i><b>5.7.1</b> [Binary] Item-based Collaborative Filtering</a></li>
<li class="chapter" data-level="5.7.2" data-path="collaborative-filtering.html"><a href="collaborative-filtering.html#binary-user-based-collaborative-filtering"><i class="fa fa-check"></i><b>5.7.2</b> [Binary] User-based Collaborative Filtering</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="self-learning-2.html"><a href="self-learning-2.html"><i class="fa fa-check"></i><b>6</b> Self-learning</a>
<ul>
<li class="chapter" data-level="6.1" data-path="self-learning-2.html"><a href="self-learning-2.html#eda-movielens"><i class="fa fa-check"></i><b>6.1</b> [EDA] MovieLens</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="self-learning-2.html"><a href="self-learning-2.html#get-data"><i class="fa fa-check"></i><b>6.1.1</b> Get data</a></li>
<li class="chapter" data-level="6.1.2" data-path="self-learning-2.html"><a href="self-learning-2.html#eda"><i class="fa fa-check"></i><b>6.1.2</b> EDA</a></li>
<li class="chapter" data-level="6.1.3" data-path="self-learning-2.html"><a href="self-learning-2.html#adjust-plot-output"><i class="fa fa-check"></i><b>6.1.3</b> Adjust plot output</a></li>
<li class="chapter" data-level="6.1.4" data-path="self-learning-2.html"><a href="self-learning-2.html#average-ratings-1"><i class="fa fa-check"></i><b>6.1.4</b> Average Ratings</a></li>
<li class="chapter" data-level="6.1.5" data-path="self-learning-2.html"><a href="self-learning-2.html#rating-matrix-1"><i class="fa fa-check"></i><b>6.1.5</b> Rating Matrix</a></li>
<li class="chapter" data-level="6.1.6" data-path="self-learning-2.html"><a href="self-learning-2.html#normalize-1"><i class="fa fa-check"></i><b>6.1.6</b> Normalize</a></li>
<li class="chapter" data-level="6.1.7" data-path="self-learning-2.html"><a href="self-learning-2.html#binarization-1"><i class="fa fa-check"></i><b>6.1.7</b> Binarization</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="self-learning-2.html"><a href="self-learning-2.html#cf-movielens"><i class="fa fa-check"></i><b>6.2</b> [CF] MovieLens</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="self-learning-2.html"><a href="self-learning-2.html#problem1"><i class="fa fa-check"></i><b>6.2.1</b> Use <code>similarity()</code> to recheck Hand-on problem 1</a></li>
<li class="chapter" data-level="6.2.2" data-path="self-learning-2.html"><a href="self-learning-2.html#similarity-try-using-robust-statistic"><i class="fa fa-check"></i><b>6.2.2</b> Similarity: try using robust statistic</a></li>
<li class="chapter" data-level="6.2.3" data-path="self-learning-2.html"><a href="self-learning-2.html#why-the-following-code-get-different-results-between-hand-on-problem-2"><i class="fa fa-check"></i><b>6.2.3</b> Why the following code get different results between Hand-on problem 2</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Final Project</b></span></li>
<li class="chapter" data-level="7" data-path="final-project.html"><a href="final-project.html"><i class="fa fa-check"></i><b>7</b> Final Project</a></li>
<li class="divider"></li>
<li><a href="./">by ZIH-YING, LI</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Recommender System</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="self-learning-1" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Sec 4</span> Self-learning<a href="self-learning-1.html#self-learning-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="self-learning-1.html#cb121-1" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb121-2"><a href="self-learning-1.html#cb121-2" tabindex="-1"></a><span class="fu">library</span>(arulesViz)</span>
<span id="cb121-3"><a href="self-learning-1.html#cb121-3" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb121-4"><a href="self-learning-1.html#cb121-4" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb121-5"><a href="self-learning-1.html#cb121-5" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb121-6"><a href="self-learning-1.html#cb121-6" tabindex="-1"></a><span class="fu">library</span>(huxtable)</span></code></pre></div>
<p>表格輸出設定，因為<code>gitbook</code>會把寬的表格給cut掉</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="self-learning-1.html#cb122-1" tabindex="-1"></a>print.rule.table <span class="ot">&lt;-</span> <span class="cf">function</span>(rule, <span class="at">sub=</span>F, ...,</span>
<span id="cb122-2"><a href="self-learning-1.html#cb122-2" tabindex="-1"></a>                             <span class="at">sort=</span>T, <span class="at">sortBy=</span><span class="st">&#39;lift&#39;</span>, </span>
<span id="cb122-3"><a href="self-learning-1.html#cb122-3" tabindex="-1"></a>                             <span class="at">all=</span>F, <span class="at">headN=</span><span class="dv">5</span>,</span>
<span id="cb122-4"><a href="self-learning-1.html#cb122-4" tabindex="-1"></a>                             <span class="at">select=</span>F, selected, </span>
<span id="cb122-5"><a href="self-learning-1.html#cb122-5" tabindex="-1"></a>                             <span class="at">digits=</span><span class="dv">2</span>, <span class="at">scroll=</span>F, <span class="at">kable=</span>T){</span>
<span id="cb122-6"><a href="self-learning-1.html#cb122-6" tabindex="-1"></a>  <span class="cf">if</span>(sub) out <span class="ot">&lt;-</span> <span class="fu">subset</span>(rule, ...) <span class="cf">else</span> out <span class="ot">&lt;-</span> rule</span>
<span id="cb122-7"><a href="self-learning-1.html#cb122-7" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">length</span>(out)<span class="sc">==</span><span class="dv">0</span>) <span class="fu">message</span>(<span class="st">&#39;no rules in this condition.&#39;</span>) <span class="cf">else</span> {</span>
<span id="cb122-8"><a href="self-learning-1.html#cb122-8" tabindex="-1"></a>    <span class="cf">if</span>(sort) out <span class="ot">&lt;-</span> <span class="fu">sort</span>(out, <span class="at">by=</span>sortBy) <span class="cf">else</span> out <span class="ot">&lt;-</span> rule</span>
<span id="cb122-9"><a href="self-learning-1.html#cb122-9" tabindex="-1"></a>    <span class="cf">if</span>(all) out <span class="ot">&lt;-</span> out <span class="cf">else</span> out <span class="ot">&lt;-</span> <span class="fu">head</span>(out, headN) </span>
<span id="cb122-10"><a href="self-learning-1.html#cb122-10" tabindex="-1"></a>    <span class="cf">if</span>(select){</span>
<span id="cb122-11"><a href="self-learning-1.html#cb122-11" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">missing</span>(selected)) <span class="fu">warning</span>(<span class="st">&quot;selected column should be specified.&quot;</span>) <span class="cf">else</span> </span>
<span id="cb122-12"><a href="self-learning-1.html#cb122-12" tabindex="-1"></a>        out <span class="ot">&lt;-</span> <span class="fu">DATAFRAME</span>(out)[, <span class="fu">c</span>(<span class="st">&quot;LHS&quot;</span>, <span class="st">&quot;RHS&quot;</span>, selected)]</span>
<span id="cb122-13"><a href="self-learning-1.html#cb122-13" tabindex="-1"></a>    } <span class="cf">else</span> out <span class="ot">&lt;-</span> <span class="fu">DATAFRAME</span>(out)</span>
<span id="cb122-14"><a href="self-learning-1.html#cb122-14" tabindex="-1"></a>    <span class="cf">if</span>(kable){</span>
<span id="cb122-15"><a href="self-learning-1.html#cb122-15" tabindex="-1"></a>      out <span class="ot">&lt;-</span> <span class="fu">format</span>(out, <span class="at">digits=</span>digits) <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span>
<span id="cb122-16"><a href="self-learning-1.html#cb122-16" tabindex="-1"></a>      <span class="cf">if</span>(scroll){</span>
<span id="cb122-17"><a href="self-learning-1.html#cb122-17" tabindex="-1"></a>        out <span class="ot">&lt;-</span> out <span class="sc">|&gt;</span></span>
<span id="cb122-18"><a href="self-learning-1.html#cb122-18" tabindex="-1"></a>          <span class="fu">kable_styling</span>() <span class="sc">|&gt;</span></span>
<span id="cb122-19"><a href="self-learning-1.html#cb122-19" tabindex="-1"></a>          <span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="at">box_css =</span> <span class="st">&quot;border: 0px;&quot;</span>)</span>
<span id="cb122-20"><a href="self-learning-1.html#cb122-20" tabindex="-1"></a>      }</span>
<span id="cb122-21"><a href="self-learning-1.html#cb122-21" tabindex="-1"></a>    } <span class="cf">else</span> out <span class="ot">&lt;-</span> <span class="fu">format</span>(out, <span class="at">digits=</span>digits)</span>
<span id="cb122-22"><a href="self-learning-1.html#cb122-22" tabindex="-1"></a>    <span class="fu">return</span>(out)</span>
<span id="cb122-23"><a href="self-learning-1.html#cb122-23" tabindex="-1"></a>  }</span>
<span id="cb122-24"><a href="self-learning-1.html#cb122-24" tabindex="-1"></a>}</span></code></pre></div>
<p>比較不同的規則，列出相同條件下，不同方法取出的規則</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="self-learning-1.html#cb123-1" tabindex="-1"></a>compare.rule <span class="ot">&lt;-</span> <span class="cf">function</span>(rule1, rule2, ...){</span>
<span id="cb123-2"><a href="self-learning-1.html#cb123-2" tabindex="-1"></a>  row1 <span class="ot">&lt;-</span> <span class="fu">subset</span>(rule1<span class="sc">@</span>quality, ...) <span class="sc">|&gt;</span> <span class="fu">rownames</span>()</span>
<span id="cb123-3"><a href="self-learning-1.html#cb123-3" tabindex="-1"></a>  row2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(rule2<span class="sc">@</span>quality, ...) <span class="sc">|&gt;</span> <span class="fu">rownames</span>()</span>
<span id="cb123-4"><a href="self-learning-1.html#cb123-4" tabindex="-1"></a>  <span class="fu">list</span>(rule1[row1], rule2[row2])</span>
<span id="cb123-5"><a href="self-learning-1.html#cb123-5" tabindex="-1"></a>}</span></code></pre></div>
<p>映射滿足條件的欄位</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="self-learning-1.html#cb124-1" tabindex="-1"></a>mapping <span class="ot">&lt;-</span> <span class="cf">function</span>(df, rangeVec, tagetCol){</span>
<span id="cb124-2"><a href="self-learning-1.html#cb124-2" tabindex="-1"></a>  df <span class="sc">|&gt;</span></span>
<span id="cb124-3"><a href="self-learning-1.html#cb124-3" tabindex="-1"></a>    <span class="fu">as_hux</span>() <span class="sc">|&gt;</span></span>
<span id="cb124-4"><a href="self-learning-1.html#cb124-4" tabindex="-1"></a>    <span class="fu">map_background_color</span>(everywhere, tagetCol, </span>
<span id="cb124-5"><a href="self-learning-1.html#cb124-5" tabindex="-1"></a>                         <span class="fu">by_ranges</span>(rangeVec, <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&#39;#FEF9E7&#39;</span>, <span class="cn">NA</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb124-6"><a href="self-learning-1.html#cb124-6" tabindex="-1"></a>    <span class="fu">map_text_color</span>(everywhere, tagetCol, </span>
<span id="cb124-7"><a href="self-learning-1.html#cb124-7" tabindex="-1"></a>                   <span class="fu">by_ranges</span>(rangeVec, <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&#39;#212F3C&#39;</span>, <span class="cn">NA</span>)))</span>
<span id="cb124-8"><a href="self-learning-1.html#cb124-8" tabindex="-1"></a>}</span></code></pre></div>
<div id="check-details-of-income-data-set" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> check details of <code>Income</code> data set<a href="self-learning-1.html#check-details-of-income-data-set" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Using package dataset “Income”, and check package PDF manual for details, and explain the code via markdown.</p>
<ul>
<li><code>Income</code>: 交易物件(transactions object)，包含6876筆交易、50個項目(隸屬於14個變數)
<ul>
<li><code>income</code>, <code>sex</code>, <code>marital status</code>, <code>age</code>, <code>education</code>, <code>occupation</code>, <code>years in bay area</code>, <code>dual incomes</code>, <code>number in household</code>, <code>number of children</code>, <code>householder status</code>, <code>type of home</code>, <code>ethnic classification</code>, <code>language in home</code></li>
</ul></li>
<li>資料處理:
<ul>
<li><strong>1.</strong> 移除包含遺失值的資料</li>
<li><strong>2.</strong> 以中位數將順序尺度(ordinal)變數分為兩類</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="self-learning-1.html#cb125-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;IncomeESL&quot;</span>)</span>
<span id="cb125-2"><a href="self-learning-1.html#cb125-2" tabindex="-1"></a>cum.freq <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb125-3"><a href="self-learning-1.html#cb125-3" tabindex="-1"></a>  var.ord.fac <span class="ot">&lt;-</span> <span class="fu">sapply</span>(df, is.ordered)</span>
<span id="cb125-4"><a href="self-learning-1.html#cb125-4" tabindex="-1"></a>  <span class="fu">sapply</span>(df[,var.ord.fac], table)</span>
<span id="cb125-5"><a href="self-learning-1.html#cb125-5" tabindex="-1"></a>}</span>
<span id="cb125-6"><a href="self-learning-1.html#cb125-6" tabindex="-1"></a><span class="fu">cum.freq</span>(IncomeESL)</span></code></pre></div>
<pre><code>## $income
## 
##  [0,10) [10,15) [15,20) [20,25) [25,30) [30,40) [40,50) [50,75)     75+ 
##    1745     775     667     813     722    1110     969    1308     884 
## 
## $age
## 
## 14-17 18-24 25-34 35-44 45-54 55-64   65+ 
##   878  2129  2249  1615   922   640   560 
## 
## $education
## 
##             grade &lt;9          grades 9-11 high school graduate 
##                  264                 1046                 2041 
##  college (1-3 years)     college graduate       graduate study 
##                 3066                 1524                  966 
## 
## $`years in bay area`
## 
##   &lt;1  1-3  4-6 7-10  &gt;10 
##  270 1042  686  900 5182 
## 
## $`number in household`
## 
##    1    2    3    4    5    6    7    8   9+ 
## 1620 2664 1670 1526  686  239  105   56   52 
## 
## $`number of children`
## 
##    0    1    2    3    4    5    6    7    8   9+ 
## 5724 1506 1148  412  117   46   27    8    2    3</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="self-learning-1.html#cb127-1" tabindex="-1"></a><span class="do">## remove incomplete cases</span></span>
<span id="cb127-2"><a href="self-learning-1.html#cb127-2" tabindex="-1"></a>IncomeESL <span class="ot">&lt;-</span> IncomeESL[<span class="fu">complete.cases</span>(IncomeESL), ]</span>
<span id="cb127-3"><a href="self-learning-1.html#cb127-3" tabindex="-1"></a></span>
<span id="cb127-4"><a href="self-learning-1.html#cb127-4" tabindex="-1"></a><span class="do">## preparing the data set</span></span>
<span id="cb127-5"><a href="self-learning-1.html#cb127-5" tabindex="-1"></a>IncomeESL[[<span class="st">&quot;income&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">factor</span>((<span class="fu">as.numeric</span>(IncomeESL[[<span class="st">&quot;income&quot;</span>]]) <span class="sc">&gt;</span> <span class="dv">6</span>) <span class="sc">+</span><span class="dv">1</span>,</span>
<span id="cb127-6"><a href="self-learning-1.html#cb127-6" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">1</span> <span class="sc">:</span> <span class="dv">2</span> , <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;$0-$40,000&quot;</span>, <span class="st">&quot;$40,000+&quot;</span>))</span>
<span id="cb127-7"><a href="self-learning-1.html#cb127-7" tabindex="-1"></a>      </span>
<span id="cb127-8"><a href="self-learning-1.html#cb127-8" tabindex="-1"></a>IncomeESL[[<span class="st">&quot;age&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">factor</span>((<span class="fu">as.numeric</span>(IncomeESL[[<span class="st">&quot;age&quot;</span>]]) <span class="sc">&gt;</span> <span class="dv">3</span>) <span class="sc">+</span><span class="dv">1</span>,</span>
<span id="cb127-9"><a href="self-learning-1.html#cb127-9" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">1</span> <span class="sc">:</span> <span class="dv">2</span> , <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;14-34&quot;</span>, <span class="st">&quot;35+&quot;</span>))</span>
<span id="cb127-10"><a href="self-learning-1.html#cb127-10" tabindex="-1"></a></span>
<span id="cb127-11"><a href="self-learning-1.html#cb127-11" tabindex="-1"></a>IncomeESL[[<span class="st">&quot;education&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">factor</span>((<span class="fu">as.numeric</span>(IncomeESL[[<span class="st">&quot;education&quot;</span>]]) <span class="sc">&gt;</span> <span class="dv">4</span>) <span class="sc">+</span><span class="dv">1</span>,</span>
<span id="cb127-12"><a href="self-learning-1.html#cb127-12" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">1</span> <span class="sc">:</span> <span class="dv">2</span> , <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;no college graduate&quot;</span>, <span class="st">&quot;college graduate&quot;</span>))</span>
<span id="cb127-13"><a href="self-learning-1.html#cb127-13" tabindex="-1"></a></span>
<span id="cb127-14"><a href="self-learning-1.html#cb127-14" tabindex="-1"></a>IncomeESL[[<span class="st">&quot;years in bay area&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb127-15"><a href="self-learning-1.html#cb127-15" tabindex="-1"></a>  (<span class="fu">as.numeric</span>(IncomeESL[[<span class="st">&quot;years in bay area&quot;</span>]]) <span class="sc">&gt;</span> <span class="dv">4</span>) <span class="sc">+</span><span class="dv">1</span>,</span>
<span id="cb127-16"><a href="self-learning-1.html#cb127-16" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">1</span> <span class="sc">:</span> <span class="dv">2</span> , <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;1-9&quot;</span>, <span class="st">&quot;10+&quot;</span>))</span>
<span id="cb127-17"><a href="self-learning-1.html#cb127-17" tabindex="-1"></a></span>
<span id="cb127-18"><a href="self-learning-1.html#cb127-18" tabindex="-1"></a>IncomeESL[[<span class="st">&quot;number in household&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb127-19"><a href="self-learning-1.html#cb127-19" tabindex="-1"></a>  (<span class="fu">as.numeric</span>(IncomeESL[[<span class="st">&quot;number in household&quot;</span>]]) <span class="sc">&gt;</span> <span class="dv">3</span>) <span class="sc">+</span><span class="dv">1</span>,</span>
<span id="cb127-20"><a href="self-learning-1.html#cb127-20" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">1</span> <span class="sc">:</span> <span class="dv">2</span> , <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2+&quot;</span>))</span>
<span id="cb127-21"><a href="self-learning-1.html#cb127-21" tabindex="-1"></a></span>
<span id="cb127-22"><a href="self-learning-1.html#cb127-22" tabindex="-1"></a>IncomeESL[[<span class="st">&quot;number of children&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb127-23"><a href="self-learning-1.html#cb127-23" tabindex="-1"></a>  (<span class="fu">as.numeric</span>(IncomeESL[[<span class="st">&quot;number of children&quot;</span>]]) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">+</span><span class="dv">0</span>,</span>
<span id="cb127-24"><a href="self-learning-1.html#cb127-24" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">0</span> <span class="sc">:</span> <span class="dv">1</span> , <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;0&quot;</span>, <span class="st">&quot;1+&quot;</span>))</span>
<span id="cb127-25"><a href="self-learning-1.html#cb127-25" tabindex="-1"></a>    </span>
<span id="cb127-26"><a href="self-learning-1.html#cb127-26" tabindex="-1"></a><span class="do">##  creating transactions</span></span>
<span id="cb127-27"><a href="self-learning-1.html#cb127-27" tabindex="-1"></a>Income <span class="ot">&lt;-</span> <span class="fu">transactions</span>(IncomeESL)</span></code></pre></div>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="self-learning-1.html#cb128-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;Income&quot;</span>)</span>
<span id="cb128-2"><a href="self-learning-1.html#cb128-2" tabindex="-1"></a>Income<span class="sc">@</span>itemInfo <span class="sc">|&gt;</span> DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">filter =</span> <span class="st">&#39;top&#39;</span>)</span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-76c3ab650e8be86a9b03" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-76c3ab650e8be86a9b03">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;age&quot;,&quot;dual incomes&quot;,&quot;education&quot;,&quot;ethnic classification&quot;,&quot;householder status&quot;,&quot;income&quot;,&quot;language in home&quot;,&quot;marital status&quot;,&quot;number in household&quot;,&quot;number of children&quot;,&quot;occupation&quot;,&quot;sex&quot;,&quot;type of home&quot;,&quot;years in bay area&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;0&quot;,&quot;$0-$40,000&quot;,&quot;1&quot;,&quot;1+&quot;,&quot;10+&quot;,&quot;14-34&quot;,&quot;1-9&quot;,&quot;2+&quot;,&quot;35+&quot;,&quot;$40,000+&quot;,&quot;american indian&quot;,&quot;apartment&quot;,&quot;asian&quot;,&quot;black&quot;,&quot;clerical/service&quot;,&quot;cohabitation&quot;,&quot;college graduate&quot;,&quot;condominium&quot;,&quot;divorced&quot;,&quot;east indian&quot;,&quot;english&quot;,&quot;female&quot;,&quot;hispanic&quot;,&quot;homemaker&quot;,&quot;house&quot;,&quot;laborer&quot;,&quot;live with parents/family&quot;,&quot;male&quot;,&quot;married&quot;,&quot;military&quot;,&quot;mobile Home&quot;,&quot;no&quot;,&quot;no college graduate&quot;,&quot;not married&quot;,&quot;other&quot;,&quot;own&quot;,&quot;pacific islander&quot;,&quot;professional/managerial&quot;,&quot;rent&quot;,&quot;retired&quot;,&quot;sales&quot;,&quot;single&quot;,&quot;spanish&quot;,&quot;student&quot;,&quot;unemployed&quot;,&quot;white&quot;,&quot;widowed&quot;,&quot;yes&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50"],["income=$0-$40,000","income=$40,000+","sex=male","sex=female","marital status=married","marital status=cohabitation","marital status=divorced","marital status=widowed","marital status=single","age=14-34","age=35+","education=no college graduate","education=college graduate","occupation=professional/managerial","occupation=sales","occupation=laborer","occupation=clerical/service","occupation=homemaker","occupation=student","occupation=military","occupation=retired","occupation=unemployed","years in bay area=1-9","years in bay area=10+","dual incomes=not married","dual incomes=yes","dual incomes=no","number in household=1","number in household=2+","number of children=0","number of children=1+","householder status=own","householder status=rent","householder status=live with parents/family","type of home=house","type of home=condominium","type of home=apartment","type of home=mobile Home","type of home=other","ethnic classification=american indian","ethnic classification=asian","ethnic classification=black","ethnic classification=east indian","ethnic classification=hispanic","ethnic classification=pacific islander","ethnic classification=white","ethnic classification=other","language in home=english","language in home=spanish","language in home=other"],["income","income","sex","sex","marital status","marital status","marital status","marital status","marital status","age","age","education","education","occupation","occupation","occupation","occupation","occupation","occupation","occupation","occupation","occupation","years in bay area","years in bay area","dual incomes","dual incomes","dual incomes","number in household","number in household","number of children","number of children","householder status","householder status","householder status","type of home","type of home","type of home","type of home","type of home","ethnic classification","ethnic classification","ethnic classification","ethnic classification","ethnic classification","ethnic classification","ethnic classification","ethnic classification","language in home","language in home","language in home"],["$0-$40,000","$40,000+","male","female","married","cohabitation","divorced","widowed","single","14-34","35+","no college graduate","college graduate","professional/managerial","sales","laborer","clerical/service","homemaker","student","military","retired","unemployed","1-9","10+","not married","yes","no","1","2+","0","1+","own","rent","live with parents/family","house","condominium","apartment","mobile Home","other","american indian","asian","black","east indian","hispanic","pacific islander","white","other","english","spanish","other"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>labels<\/th>\n      <th>variables<\/th>\n      <th>levels<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="compare-different-grouping-regroup-income-into-2-levels" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> [compare different grouping] regroup income into 2 levels<a href="self-learning-1.html#compare-different-grouping-regroup-income-into-2-levels" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Use “IncomeESL”, merge income into two levels c(“$40-”,“$40+”). Compare your results.</p>
<ul>
<li>重新切分 <span class="math inline">\(\to\)</span> 類似商品層級
<ul>
<li>e.g. 衣服 <span class="math inline">\(\to\)</span> 長袖、短袖、外套、…</li>
</ul></li>
</ul>
<div id="explore-data" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> explore data<a href="self-learning-1.html#explore-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>對 income 變數進行重新分組，該變數共9組，各組個數如下</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="self-learning-1.html#cb129-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;IncomeESL&quot;</span>)</span>
<span id="cb129-2"><a href="self-learning-1.html#cb129-2" tabindex="-1"></a><span class="fu">levels</span>(IncomeESL[[<span class="st">&quot;income&quot;</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;[0,10)&quot;  &quot;[10,15)&quot; &quot;[15,20)&quot; &quot;[20,25)&quot; &quot;[25,30)&quot; &quot;[30,40)&quot; &quot;[40,50)&quot;
## [8] &quot;[50,75)&quot; &quot;75+&quot;</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="self-learning-1.html#cb131-1" tabindex="-1"></a><span class="fu">table</span>(IncomeESL[[<span class="st">&quot;income&quot;</span>]])</span></code></pre></div>
<pre><code>## 
##  [0,10) [10,15) [15,20) [20,25) [25,30) [30,40) [40,50) [50,75)     75+ 
##    1745     775     667     813     722    1110     969    1308     884</code></pre>
<p>比較把 income 重新分為2組($40-, $40+)和3組($20-, $20-$40, $40+)對探勘關聯規則有甚麼影響</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="self-learning-1.html#cb133-1" tabindex="-1"></a>df<span class="fl">.2</span>g <span class="ot">&lt;-</span> df<span class="fl">.3</span>g <span class="ot">&lt;-</span> IncomeESL</span>
<span id="cb133-2"><a href="self-learning-1.html#cb133-2" tabindex="-1"></a>df<span class="fl">.2</span>g[[<span class="st">&quot;income&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">factor</span>((<span class="fu">as.numeric</span>(df<span class="fl">.2</span>g[[<span class="st">&quot;income&quot;</span>]]) <span class="sc">&gt;</span> <span class="dv">6</span>) <span class="sc">+</span><span class="dv">1</span>, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span> , <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;$40-&quot;</span>, <span class="st">&quot;$40+&quot;</span>))</span>
<span id="cb133-3"><a href="self-learning-1.html#cb133-3" tabindex="-1"></a><span class="co"># table(df.2g$income)</span></span>
<span id="cb133-4"><a href="self-learning-1.html#cb133-4" tabindex="-1"></a>Income<span class="fl">.2</span>g <span class="ot">&lt;-</span> <span class="fu">as</span>(df<span class="fl">.2</span>g, <span class="st">&#39;transactions&#39;</span>)</span>
<span id="cb133-5"><a href="self-learning-1.html#cb133-5" tabindex="-1"></a></span>
<span id="cb133-6"><a href="self-learning-1.html#cb133-6" tabindex="-1"></a>df<span class="fl">.3</span>g[[<span class="st">&quot;income&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb133-7"><a href="self-learning-1.html#cb133-7" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">as.numeric</span>(df<span class="fl">.3</span>g[[<span class="st">&quot;income&quot;</span>]]) <span class="sc">&lt;</span> <span class="dv">4</span>, <span class="dv">1</span>, </span>
<span id="cb133-8"><a href="self-learning-1.html#cb133-8" tabindex="-1"></a>         <span class="fu">ifelse</span>(<span class="fu">as.numeric</span>(df<span class="fl">.3</span>g[[<span class="st">&quot;income&quot;</span>]]) <span class="sc">&lt;</span> <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">3</span>)), </span>
<span id="cb133-9"><a href="self-learning-1.html#cb133-9" tabindex="-1"></a>  <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> , <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;$20-&quot;</span>, <span class="st">&quot;$20-$40&quot;</span>, <span class="st">&quot;$40+&quot;</span>))</span>
<span id="cb133-10"><a href="self-learning-1.html#cb133-10" tabindex="-1"></a><span class="co"># table(df.3g$income)</span></span>
<span id="cb133-11"><a href="self-learning-1.html#cb133-11" tabindex="-1"></a>Income<span class="fl">.3</span>g <span class="ot">&lt;-</span> <span class="fu">as</span>(df<span class="fl">.3</span>g, <span class="st">&#39;transactions&#39;</span>)</span></code></pre></div>
<ul>
<li>下面兩張圖分別是 income 分成2組和3組時，次數最多的10個項目，主要差別用紅線標記
<ul>
<li>分成2組時，income = $40- 為第2高</li>
<li>分成3組時，income 沒有在前10名內</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="self-learning-1.html#cb134-1" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb134-2"><a href="self-learning-1.html#cb134-2" tabindex="-1"></a><span class="fu">itemFrequencyPlot</span>(Income<span class="fl">.2</span>g, <span class="at">topN=</span><span class="dv">10</span>, <span class="at">horiz=</span>T, <span class="at">main=</span><span class="st">&#39;top 10 highest freq. with 2 group income&#39;</span>)</span>
<span id="cb134-3"><a href="self-learning-1.html#cb134-3" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h=</span><span class="fl">1.9</span>, <span class="at">col=</span><span class="st">&#39;red&#39;</span>)</span>
<span id="cb134-4"><a href="self-learning-1.html#cb134-4" tabindex="-1"></a><span class="fu">itemFrequencyPlot</span>(Income<span class="fl">.3</span>g, <span class="at">topN=</span><span class="dv">10</span>, <span class="at">horiz=</span>T, <span class="at">main=</span><span class="st">&#39;top 10 highest freq. with 3 group income&#39;</span>)</span>
<span id="cb134-5"><a href="self-learning-1.html#cb134-5" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h=</span><span class="fl">10.3</span>, <span class="at">col=</span><span class="st">&#39;red&#39;</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-71-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<div id="explore-rule" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> explore rule<a href="self-learning-1.html#explore-rule" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>設定最小支持度為0.4、信賴度0.5: 保留常見的規則</li>
</ul>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="self-learning-1.html#cb135-1" tabindex="-1"></a>rule<span class="fl">.2</span>g <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Income<span class="fl">.2</span>g, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.4</span>, <span class="at">confidence =</span> <span class="fl">0.5</span>))</span>
<span id="cb135-2"><a href="self-learning-1.html#cb135-2" tabindex="-1"></a>rule<span class="fl">.3</span>g <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Income<span class="fl">.3</span>g, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.4</span>, <span class="at">confidence =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<ul>
<li>不同項目集個數的規則數 (RHS+LHS)
<ul>
<li>2組: 38個規則</li>
<li>3組: 28個規則</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="self-learning-1.html#cb136-1" tabindex="-1"></a><span class="fu">summary</span>(rule<span class="fl">.2</span>g)<span class="sc">@</span>lengths</span></code></pre></div>
<pre><code>## sizes
##  1  2  3 
##  8 24  6</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="self-learning-1.html#cb138-1" tabindex="-1"></a><span class="fu">summary</span>(rule<span class="fl">.3</span>g)<span class="sc">@</span>lengths</span></code></pre></div>
<pre><code>## sizes
##  1  2  3 
##  7 18  3</code></pre>
<hr>
<ul>
<li class="downarrow">
<p>以增益度(lift)排序，顯示前5高的規則</p>
<ul>
<li>
兩種分組的前2個規則相同
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="self-learning-1.html#cb140-1" tabindex="-1"></a><span class="fu">print.rule.table</span>(rule<span class="fl">.2</span>g, <span class="at">scroll =</span> T)</span>
<span id="cb140-2"><a href="self-learning-1.html#cb140-2" tabindex="-1"></a><span class="fu">print.rule.table</span>(rule<span class="fl">.3</span>g, <span class="at">scroll =</span> T)</span></code></pre></div>
<div style="border: 0px;overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
{marital status=single}
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
1.7
</td>
<td style="text-align:left;">
3654
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
{marital status=single}
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
0.67
</td>
<td style="text-align:left;">
0.60
</td>
<td style="text-align:left;">
1.7
</td>
<td style="text-align:left;">
3654
</td>
</tr>
<tr>
<td style="text-align:left;">
35
</td>
<td style="text-align:left;">
{income=$40-,language in home=english}
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
0.74
</td>
<td style="text-align:left;">
0.55
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
3670
</td>
</tr>
<tr>
<td style="text-align:left;">
20
</td>
<td style="text-align:left;">
{income=$40-}
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
0.48
</td>
<td style="text-align:left;">
0.73
</td>
<td style="text-align:left;">
0.65
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
4282
</td>
</tr>
<tr>
<td style="text-align:left;">
19
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
{income=$40-}
</td>
<td style="text-align:left;">
0.48
</td>
<td style="text-align:left;">
0.79
</td>
<td style="text-align:left;">
0.60
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
4282
</td>
</tr>
</tbody>
</table>
</div>
<div style="border: 0px;overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
{marital status=single}
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
1.7
</td>
<td style="text-align:left;">
3654
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
{marital status=single}
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
0.67
</td>
<td style="text-align:left;">
0.60
</td>
<td style="text-align:left;">
1.7
</td>
<td style="text-align:left;">
3654
</td>
</tr>
<tr>
<td style="text-align:left;">
27
</td>
<td style="text-align:left;">
{number of children=0,language in home=english}
</td>
<td style="text-align:left;">
{ethnic classification=white}
</td>
<td style="text-align:left;">
0.42
</td>
<td style="text-align:left;">
0.75
</td>
<td style="text-align:left;">
0.56
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
3787
</td>
</tr>
<tr>
<td style="text-align:left;">
26
</td>
<td style="text-align:left;">
{number of children=0,ethnic classification=white}
</td>
<td style="text-align:left;">
{language in home=english}
</td>
<td style="text-align:left;">
0.42
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
0.45
</td>
<td style="text-align:left;">
1.1
</td>
<td style="text-align:left;">
3787
</td>
</tr>
<tr>
<td style="text-align:left;">
24
</td>
<td style="text-align:left;">
{ethnic classification=white}
</td>
<td style="text-align:left;">
{language in home=english}
</td>
<td style="text-align:left;">
0.61
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
0.65
</td>
<td style="text-align:left;">
1.1
</td>
<td style="text-align:left;">
5495
</td>
</tr>
</tbody>
</table>
</div>
<hr>
<ul>
<li class="downarrow">
<p>分成2組(上)和3組(下)時的分布圖</p>
<ul>
<li>
多出來的10個規則大概分布在信賴度 = 0.65 和 0.75 處
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="self-learning-1.html#cb141-1" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb141-2"><a href="self-learning-1.html#cb141-2" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">plot</span>(rule<span class="fl">.2</span>g, <span class="at">measure=</span><span class="fu">c</span>(<span class="st">&quot;confidence&quot;</span>,<span class="st">&quot;lift&quot;</span>), <span class="at">shading=</span><span class="st">&quot;support&quot;</span>)<span class="sc">+</span></span>
<span id="cb141-3"><a href="self-learning-1.html#cb141-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span> <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, <span class="at">col=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb141-4"><a href="self-learning-1.html#cb141-4" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">plot</span>(rule<span class="fl">.3</span>g, <span class="at">measure=</span><span class="fu">c</span>(<span class="st">&quot;confidence&quot;</span>,<span class="st">&quot;lift&quot;</span>), <span class="at">shading=</span><span class="st">&quot;support&quot;</span>)<span class="sc">+</span></span>
<span id="cb141-5"><a href="self-learning-1.html#cb141-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span> <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>, <span class="at">col=</span><span class="st">&#39;blue&#39;</span>)</span>
<span id="cb141-6"><a href="self-learning-1.html#cb141-6" tabindex="-1"></a><span class="fu">plot_grid</span>(p1, p2, <span class="at">nrow=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-75-1.png" width="1152" style="display: block; margin: auto;" /></p>
<hr>
<ul>
<li class="downarrow">
<p>檢視信賴度Range=(0.7, 0.8)且增益度Range=(1.1, 1.3)處的規則(目測約5個)</p>
<ul>
<li>
分成2組多出的規則為前4筆
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="self-learning-1.html#cb142-1" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">compare.rule</span>(rule<span class="fl">.2</span>g, rule<span class="fl">.3</span>g, confidence<span class="sc">&gt;</span><span class="fl">0.7</span> <span class="sc">&amp;</span> confidence<span class="sc">&lt;</span><span class="fl">0.8</span> <span class="sc">&amp;</span> lift<span class="sc">&gt;</span><span class="fl">1.1</span> <span class="sc">&amp;</span> lift<span class="sc">&lt;</span><span class="fl">1.3</span>)</span>
<span id="cb142-2"><a href="self-learning-1.html#cb142-2" tabindex="-1"></a><span class="fu">print.rule.table</span>(results[[<span class="dv">1</span>]], <span class="at">all=</span>T, <span class="at">scroll=</span>T)</span>
<span id="cb142-3"><a href="self-learning-1.html#cb142-3" tabindex="-1"></a><span class="fu">print.rule.table</span>(results[[<span class="dv">2</span>]], <span class="at">all=</span>T, <span class="at">scroll=</span>T)</span></code></pre></div>
<div style="border: 0px;overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
35
</td>
<td style="text-align:left;">
{income=$40-,language in home=english}
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
0.74
</td>
<td style="text-align:left;">
0.55
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
3670
</td>
</tr>
<tr>
<td style="text-align:left;">
20
</td>
<td style="text-align:left;">
{income=$40-}
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
0.48
</td>
<td style="text-align:left;">
0.73
</td>
<td style="text-align:left;">
0.65
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
4282
</td>
</tr>
<tr>
<td style="text-align:left;">
19
</td>
<td style="text-align:left;">
{dual incomes=not married}
</td>
<td style="text-align:left;">
{income=$40-}
</td>
<td style="text-align:left;">
0.48
</td>
<td style="text-align:left;">
0.79
</td>
<td style="text-align:left;">
0.60
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
4282
</td>
</tr>
<tr>
<td style="text-align:left;">
34
</td>
<td style="text-align:left;">
{dual incomes=not married,language in home=english}
</td>
<td style="text-align:left;">
{income=$40-}
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
0.78
</td>
<td style="text-align:left;">
0.52
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
3670
</td>
</tr>
<tr>
<td style="text-align:left;">
37
</td>
<td style="text-align:left;">
{number of children=0,language in home=english}
</td>
<td style="text-align:left;">
{ethnic classification=white}
</td>
<td style="text-align:left;">
0.42
</td>
<td style="text-align:left;">
0.75
</td>
<td style="text-align:left;">
0.56
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
3787
</td>
</tr>
</tbody>
</table>
</div>
<div style="border: 0px;overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
27
</td>
<td style="text-align:left;">
{number of children=0,language in home=english}
</td>
<td style="text-align:left;">
{ethnic classification=white}
</td>
<td style="text-align:left;">
0.42
</td>
<td style="text-align:left;">
0.75
</td>
<td style="text-align:left;">
0.56
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
3787
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="compare-different-algorithm-mine-rule-of-adultuci-data-set" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> [compare different algorithm] mine rule of <code>AdultUCI</code> data set<a href="self-learning-1.html#compare-different-algorithm-mine-rule-of-adultuci-data-set" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>因為<code>fim4r</code>載不了，所以只比較<code>apriori</code>和<code>eclat</code></p>
</blockquote>
<p>Importing built-in data “AdultUCI” and mining rules</p>
<div id="details-of-data" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> details of data<a href="self-learning-1.html#details-of-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><code>AdultUCI</code>資料包含成人資料庫(人口普查收入資料庫)的問卷資料，包含
<ul>
<li>48,842個觀察值</li>
<li>15個變數: age, workclass, fnlwgt, education, education-num, marital-status, occupation, relationship, race, sex, capital-gain, capital-loss, hours-per-week, native-country, income</li>
</ul></li>
<li><code>Adult</code>資料為交易物件，包含
<ul>
<li>48,842筆交易</li>
<li>115個項目</li>
</ul></li>
<li>資料處理如下
<ul>
<li>移除連續特徵<code>fnlwgt</code>(final weight)</li>
<li>移除<code>education-num</code>，因為它只是<code>education</code>的數值表示</li>
<li>年齡(age)分為<code>Young</code>(0-25), <code>Middle-aged</code>(26-45), <code>Senior</code>(46-65)和<code>Old</code>(66+)</li>
<li>每周工作時間(hours-per-week)分為<code>Part-time</code>(0-25), <code>Full-time</code>(25-40), <code>Over-time</code>(40-60)和<code>Too-much</code>(60+)</li>
<li>資本收益和損失(capital-gain / capital-loss)分為<code>None</code>(0), <code>Low</code>(0 &lt; 大於0的數值之中位數 &lt; 最大值) and <code>High</code>( <span class="math inline">\(\geq\)</span> 最大值)
<ul>
<li>capital-gain: 大於0的數值之中位數=7298，分組為(-Inf,0], (0,7.3e+03], (7.3e+03, Inf]</li>
<li>capital-loss: 大於0的數值之中位數=1887，分組為(-Inf,0], (0,1.89e+03], (1.89e+03, Inf]</li>
</ul></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="self-learning-1.html#cb143-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;AdultUCI&quot;</span>)</span>
<span id="cb143-2"><a href="self-learning-1.html#cb143-2" tabindex="-1"></a><span class="do">## remove attributes</span></span>
<span id="cb143-3"><a href="self-learning-1.html#cb143-3" tabindex="-1"></a>AdultUCI[[<span class="st">&quot;fnlwgt&quot;</span>]] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb143-4"><a href="self-learning-1.html#cb143-4" tabindex="-1"></a>AdultUCI[[<span class="st">&quot;education-num&quot;</span>]] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb143-5"><a href="self-learning-1.html#cb143-5" tabindex="-1"></a></span>
<span id="cb143-6"><a href="self-learning-1.html#cb143-6" tabindex="-1"></a><span class="do">## map metric attributes</span></span>
<span id="cb143-7"><a href="self-learning-1.html#cb143-7" tabindex="-1"></a><span class="co"># min=17, max=90</span></span>
<span id="cb143-8"><a href="self-learning-1.html#cb143-8" tabindex="-1"></a>AdultUCI[[<span class="st">&quot;age&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">ordered</span>(<span class="fu">cut</span>(AdultUCI[[<span class="st">&quot;age&quot;</span>]], <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">65</span>, <span class="dv">100</span>)),</span>
<span id="cb143-9"><a href="self-learning-1.html#cb143-9" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Young&quot;</span>, <span class="st">&quot;Middle-aged&quot;</span>, <span class="st">&quot;Senior&quot;</span>, <span class="st">&quot;Old&quot;</span>))</span>
<span id="cb143-10"><a href="self-learning-1.html#cb143-10" tabindex="-1"></a></span>
<span id="cb143-11"><a href="self-learning-1.html#cb143-11" tabindex="-1"></a><span class="co"># min=1, max=99</span></span>
<span id="cb143-12"><a href="self-learning-1.html#cb143-12" tabindex="-1"></a>AdultUCI[[<span class="st">&quot;hours-per-week&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">ordered</span>(<span class="fu">cut</span>(AdultUCI[[<span class="st">&quot;hours-per-week&quot;</span>]],</span>
<span id="cb143-13"><a href="self-learning-1.html#cb143-13" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">168</span>)),</span>
<span id="cb143-14"><a href="self-learning-1.html#cb143-14" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Part-time&quot;</span>, <span class="st">&quot;Full-time&quot;</span>, <span class="st">&quot;Over-time&quot;</span>, <span class="st">&quot;Workaholic&quot;</span>))</span>
<span id="cb143-15"><a href="self-learning-1.html#cb143-15" tabindex="-1"></a></span>
<span id="cb143-16"><a href="self-learning-1.html#cb143-16" tabindex="-1"></a><span class="co"># min=0, max=99999</span></span>
<span id="cb143-17"><a href="self-learning-1.html#cb143-17" tabindex="-1"></a>AdultUCI[[<span class="st">&quot;capital-gain&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">ordered</span>(<span class="fu">cut</span>(AdultUCI[[<span class="st">&quot;capital-gain&quot;</span>]],</span>
<span id="cb143-18"><a href="self-learning-1.html#cb143-18" tabindex="-1"></a>  <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>,<span class="dv">0</span>,<span class="fu">median</span>(AdultUCI[[<span class="st">&quot;capital-gain&quot;</span>]][AdultUCI[[<span class="st">&quot;capital-gain&quot;</span>]] <span class="sc">&gt;</span> <span class="dv">0</span>]), <span class="cn">Inf</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>))</span>
<span id="cb143-19"><a href="self-learning-1.html#cb143-19" tabindex="-1"></a></span>
<span id="cb143-20"><a href="self-learning-1.html#cb143-20" tabindex="-1"></a>AdultUCI[[<span class="st">&quot;capital-loss&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">ordered</span>(<span class="fu">cut</span>(AdultUCI[[<span class="st">&quot;capital-loss&quot;</span>]],</span>
<span id="cb143-21"><a href="self-learning-1.html#cb143-21" tabindex="-1"></a>  <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>,<span class="dv">0</span>, <span class="fu">median</span>(AdultUCI[[<span class="st">&quot;capital-loss&quot;</span>]][AdultUCI[[<span class="st">&quot;capital-loss&quot;</span>]] <span class="sc">&gt;</span> <span class="dv">0</span>]), <span class="cn">Inf</span>)), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;None&quot;</span>, <span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>))</span>
<span id="cb143-22"><a href="self-learning-1.html#cb143-22" tabindex="-1"></a></span>
<span id="cb143-23"><a href="self-learning-1.html#cb143-23" tabindex="-1"></a><span class="do">## create transactions</span></span>
<span id="cb143-24"><a href="self-learning-1.html#cb143-24" tabindex="-1"></a>Adult <span class="ot">&lt;-</span> <span class="fu">transactions</span>(AdultUCI)</span></code></pre></div>
<ul>
<li><code>cut(x, breaks, ...)</code>: 把<code>x</code>切分成不同的區間</li>
</ul>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="self-learning-1.html#cb144-1" tabindex="-1"></a>tx0 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb144-2"><a href="self-learning-1.html#cb144-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">8</span>, tx0)</span>
<span id="cb144-3"><a href="self-learning-1.html#cb144-3" tabindex="-1"></a><span class="fu">table</span>(cx  <span class="ot">&lt;-</span> <span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="dv">2</span><span class="sc">*</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">4</span>)))</span></code></pre></div>
<pre><code>## 
## (0,2] (2,4] (4,6] (6,8] 
##    10     8    15     8</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="self-learning-1.html#cb146-1" tabindex="-1"></a><span class="fu">table</span>(cxl <span class="ot">&lt;-</span> <span class="fu">cut</span>(x, <span class="at">breaks =</span> <span class="dv">2</span><span class="sc">*</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">4</span>), <span class="at">right =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<pre><code>## 
## [0,2) [2,4) [4,6) [6,8) 
##    13    11    13     8</code></pre>
</div>
<div id="explore-data-1" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> explore data<a href="self-learning-1.html#explore-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>出現最多次的是資本損失和收益為無，接著是出生地為美國，種族為白人(因為是美國的人口普查)</li>
</ul>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="self-learning-1.html#cb148-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;Adult&quot;</span>)</span>
<span id="cb148-2"><a href="self-learning-1.html#cb148-2" tabindex="-1"></a><span class="fu">itemFrequencyPlot</span>(Adult, <span class="at">topN=</span><span class="dv">10</span>, <span class="at">horiz=</span>T, <span class="at">main=</span><span class="st">&#39;top 10 highest freq.&#39;</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-80-1.png" width="1152" style="display: block; margin: auto;" /></p>
</div>
<div id="explore-rule-1" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> explore rule<a href="self-learning-1.html#explore-rule-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>設定最小支持度為0.4、信賴度0.5: 保留常見的規則</li>
</ul>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="self-learning-1.html#cb149-1" tabindex="-1"></a>calc.time <span class="ot">&lt;-</span> <span class="cf">function</span>(code){</span>
<span id="cb149-2"><a href="self-learning-1.html#cb149-2" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb149-3"><a href="self-learning-1.html#cb149-3" tabindex="-1"></a>  t1 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb149-4"><a href="self-learning-1.html#cb149-4" tabindex="-1"></a>  code</span>
<span id="cb149-5"><a href="self-learning-1.html#cb149-5" tabindex="-1"></a>  t2 <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb149-6"><a href="self-learning-1.html#cb149-6" tabindex="-1"></a>  <span class="fu">return</span>(t2<span class="sc">-</span>t1)</span>
<span id="cb149-7"><a href="self-learning-1.html#cb149-7" tabindex="-1"></a>}</span>
<span id="cb149-8"><a href="self-learning-1.html#cb149-8" tabindex="-1"></a><span class="co"># Apriori</span></span>
<span id="cb149-9"><a href="self-learning-1.html#cb149-9" tabindex="-1"></a><span class="co"># rule.apriori &lt;- apriori(Adult, parameter = list(support = 0.4, confidence = 0.5))</span></span>
<span id="cb149-10"><a href="self-learning-1.html#cb149-10" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">calc.time</span>(rule.apriori <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Adult, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support =</span> <span class="fl">0.4</span>, <span class="at">confidence =</span> <span class="fl">0.5</span>)))</span>
<span id="cb149-11"><a href="self-learning-1.html#cb149-11" tabindex="-1"></a></span>
<span id="cb149-12"><a href="self-learning-1.html#cb149-12" tabindex="-1"></a><span class="co"># Eclat</span></span>
<span id="cb149-13"><a href="self-learning-1.html#cb149-13" tabindex="-1"></a>itemset.eclat <span class="ot">&lt;-</span> <span class="fu">eclat</span>(Adult, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">supp =</span> <span class="fl">0.4</span>, <span class="at">maxlen=</span><span class="dv">5</span>))</span>
<span id="cb149-14"><a href="self-learning-1.html#cb149-14" tabindex="-1"></a><span class="co"># rule.eclat &lt;- ruleInduction(itemset.eclat, confidence = 0.5)</span></span>
<span id="cb149-15"><a href="self-learning-1.html#cb149-15" tabindex="-1"></a>t2 <span class="ot">&lt;-</span> <span class="fu">calc.time</span>(rule.eclat <span class="ot">&lt;-</span> <span class="fu">ruleInduction</span>(itemset.eclat, <span class="at">confidence =</span> <span class="fl">0.5</span>))</span>
<span id="cb149-16"><a href="self-learning-1.html#cb149-16" tabindex="-1"></a></span>
<span id="cb149-17"><a href="self-learning-1.html#cb149-17" tabindex="-1"></a><span class="co"># FP-Growth</span></span>
<span id="cb149-18"><a href="self-learning-1.html#cb149-18" tabindex="-1"></a><span class="co"># rule.fpgrowth &lt;- fim4r(Adult, method = &quot;fpgrowth&quot;, target = &quot;rules&quot;, supp = .7, conf = .8)</span></span></code></pre></div>
<ul>
<li>兩種演算法的運算時間</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="left">Algorithm</th>
<th align="left">Time (sec)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">apriori</td>
<td align="left">0.06773</td>
</tr>
<tr class="even">
<td align="left">eclat</td>
<td align="left">0.02415</td>
</tr>
</tbody>
</table>
<hr>
<ul>
<li class="downarrow">
<p>apriori 和 eclat 的分布圖</p>
<ul>
<li>
無明顯差異
</li>
</ul>
<ul>
<li>
<strong>相差 9 個規則</strong>
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="self-learning-1.html#cb150-1" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">plot</span>(rule.apriori, <span class="at">measure=</span><span class="fu">c</span>(<span class="st">&quot;confidence&quot;</span>,<span class="st">&quot;lift&quot;</span>), <span class="at">shading=</span><span class="st">&quot;support&quot;</span>)<span class="sc">+</span></span>
<span id="cb150-2"><a href="self-learning-1.html#cb150-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span> <span class="fu">scale_colour_gradient</span>(<span class="at">low=</span><span class="st">&#39;steelblue1&#39;</span>, <span class="at">high=</span><span class="st">&#39;firebrick1&#39;</span>, <span class="at">limits=</span><span class="fu">c</span>(<span class="fl">0.4</span>,<span class="dv">1</span>))</span>
<span id="cb150-3"><a href="self-learning-1.html#cb150-3" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">plot</span>(rule.eclat, <span class="at">measure=</span><span class="fu">c</span>(<span class="st">&quot;confidence&quot;</span>,<span class="st">&quot;lift&quot;</span>), <span class="at">shading=</span><span class="st">&quot;support&quot;</span>)<span class="sc">+</span></span>
<span id="cb150-4"><a href="self-learning-1.html#cb150-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span> <span class="fu">scale_colour_gradient</span>(<span class="at">low=</span><span class="st">&#39;steelblue1&#39;</span>, <span class="at">high=</span><span class="st">&#39;firebrick1&#39;</span>, <span class="at">limits=</span><span class="fu">c</span>(<span class="fl">0.4</span>,<span class="dv">1</span>))</span>
<span id="cb150-5"><a href="self-learning-1.html#cb150-5" tabindex="-1"></a><span class="fu">plot_grid</span>(p1, p2, <span class="at">nrow=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-82-1.png" width="1152" style="display: block; margin: auto;" /></p>
<hr>
<ul>
<li class="downarrow">
<p>以支持度 (support) 排序，顯示前5高的規則</p>
<ul>
<li>
<strong>eclat 的 LHS 沒有空集合</strong>
</li>
</ul>
<ul>
<li>
eclat 沒有 count 和 coverage
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="self-learning-1.html#cb151-1" tabindex="-1"></a><span class="fu">print.rule.table</span>(rule.apriori, <span class="at">sortBy =</span> <span class="st">&#39;support&#39;</span>)</span>
<span id="cb151-2"><a href="self-learning-1.html#cb151-2" tabindex="-1"></a><span class="fu">print.rule.table</span>(rule.eclat, <span class="at">sortBy =</span> <span class="st">&#39;support&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{capital-loss=None}
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
46560
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{capital-gain=None}
</td>
<td style="text-align:left;">
0.92
</td>
<td style="text-align:left;">
0.92
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
44807
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{native-country=United-States}
</td>
<td style="text-align:left;">
0.90
</td>
<td style="text-align:left;">
0.90
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
43832
</td>
</tr>
<tr>
<td style="text-align:left;">
72
</td>
<td style="text-align:left;">
{capital-gain=None}
</td>
<td style="text-align:left;">
{capital-loss=None}
</td>
<td style="text-align:left;">
0.87
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
0.92
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
42525
</td>
</tr>
<tr>
<td style="text-align:left;">
73
</td>
<td style="text-align:left;">
{capital-loss=None}
</td>
<td style="text-align:left;">
{capital-gain=None}
</td>
<td style="text-align:left;">
0.87
</td>
<td style="text-align:left;">
0.91
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
42525
</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
lift
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
246
</td>
<td style="text-align:left;">
{capital-loss=None}
</td>
<td style="text-align:left;">
{capital-gain=None}
</td>
<td style="text-align:left;">
0.87
</td>
<td style="text-align:left;">
0.91
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
247
</td>
<td style="text-align:left;">
{capital-gain=None}
</td>
<td style="text-align:left;">
{capital-loss=None}
</td>
<td style="text-align:left;">
0.87
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
242
</td>
<td style="text-align:left;">
{native-country=United-States}
</td>
<td style="text-align:left;">
{capital-loss=None}
</td>
<td style="text-align:left;">
0.85
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
243
</td>
<td style="text-align:left;">
{capital-loss=None}
</td>
<td style="text-align:left;">
{native-country=United-States}
</td>
<td style="text-align:left;">
0.85
</td>
<td style="text-align:left;">
0.90
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
244
</td>
<td style="text-align:left;">
{native-country=United-States}
</td>
<td style="text-align:left;">
{capital-gain=None}
</td>
<td style="text-align:left;">
0.82
</td>
<td style="text-align:left;">
0.92
</td>
<td style="text-align:left;">
1
</td>
</tr>
</tbody>
</table>
<hr>
<ul>
<li class="downarrow">
<p>以信賴度 (confidence) 排序，顯示前5高的規則</p>
<ul>
<li>
兩種演算法的規則相同
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="self-learning-1.html#cb152-1" tabindex="-1"></a><span class="fu">print.rule.table</span>(rule.apriori, <span class="at">sortBy =</span> <span class="st">&#39;confidence&#39;</span>, <span class="at">scroll =</span> T)</span>
<span id="cb152-2"><a href="self-learning-1.html#cb152-2" tabindex="-1"></a><span class="fu">print.rule.table</span>(rule.eclat, <span class="at">sortBy =</span> <span class="st">&#39;confidence&#39;</span>)</span></code></pre></div>
<div style="border: 0px;overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
{sex=Male}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.40
</td>
<td style="text-align:left;">
1.5
</td>
<td style="text-align:left;">
19715
</td>
</tr>
<tr>
<td style="text-align:left;">
74
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse,relationship=Husband}
</td>
<td style="text-align:left;">
{sex=Male}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.40
</td>
<td style="text-align:left;">
1.5
</td>
<td style="text-align:left;">
19703
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.40
</td>
<td style="text-align:left;">
2.2
</td>
<td style="text-align:left;">
19704
</td>
</tr>
<tr>
<td style="text-align:left;">
75
</td>
<td style="text-align:left;">
{relationship=Husband,sex=Male}
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.40
</td>
<td style="text-align:left;">
2.2
</td>
<td style="text-align:left;">
19703
</td>
</tr>
<tr>
<td style="text-align:left;">
76
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse,sex=Male}
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.99
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
2.5
</td>
<td style="text-align:left;">
19703
</td>
</tr>
</tbody>
</table>
</div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
lift
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
{sex=Male}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
1.5
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse,relationship=Husband}
</td>
<td style="text-align:left;">
{sex=Male}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
1.5
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
2.2
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
{relationship=Husband,sex=Male}
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
2.2
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse,sex=Male}
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.99
</td>
<td style="text-align:left;">
2.5
</td>
</tr>
</tbody>
</table>
<hr>
<ul>
<li class="downarrow">
<p>以增益度 (lift) 排序，顯示前5高的規則</p>
<ul>
<li>
兩種演算法的規則相同
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="self-learning-1.html#cb153-1" tabindex="-1"></a><span class="fu">print.rule.table</span>(rule.apriori, <span class="at">sortBy =</span> <span class="st">&#39;lift&#39;</span>, <span class="at">scroll =</span> T)</span>
<span id="cb153-2"><a href="self-learning-1.html#cb153-2" tabindex="-1"></a><span class="fu">print.rule.table</span>(rule.eclat, <span class="at">sortBy =</span> <span class="st">&#39;lift&#39;</span>)</span></code></pre></div>
<div style="border: 0px;overflow-x: scroll; width:100%; ">
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
76
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse,sex=Male}
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.99
</td>
<td style="text-align:left;">
0.41
</td>
<td style="text-align:left;">
2.5
</td>
<td style="text-align:left;">
19703
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.88
</td>
<td style="text-align:left;">
0.46
</td>
<td style="text-align:left;">
2.2
</td>
<td style="text-align:left;">
19704
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.40
</td>
<td style="text-align:left;">
2.2
</td>
<td style="text-align:left;">
19704
</td>
</tr>
<tr>
<td style="text-align:left;">
75
</td>
<td style="text-align:left;">
{relationship=Husband,sex=Male}
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.40
</td>
<td style="text-align:left;">
2.2
</td>
<td style="text-align:left;">
19703
</td>
</tr>
<tr>
<td style="text-align:left;">
13
</td>
<td style="text-align:left;">
{sex=Male}
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.60
</td>
<td style="text-align:left;">
0.67
</td>
<td style="text-align:left;">
1.5
</td>
<td style="text-align:left;">
19715
</td>
</tr>
</tbody>
</table>
</div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
lift
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse,sex=Male}
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.99
</td>
<td style="text-align:left;">
2.5
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
2.2
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.88
</td>
<td style="text-align:left;">
2.2
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
{relationship=Husband,sex=Male}
</td>
<td style="text-align:left;">
{marital-status=Married-civ-spouse}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
2.2
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
{sex=Male}
</td>
<td style="text-align:left;">
{relationship=Husband}
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.60
</td>
<td style="text-align:left;">
1.5
</td>
</tr>
</tbody>
</table>
</div>
<div id="conclusion" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> conclusion<a href="self-learning-1.html#conclusion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li class="downarrow">
<p>apriori 比 eclat 多出來的 9 個規則為 LHS 是空集合的規則</p>
</li>
</ul>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="self-learning-1.html#cb154-1" tabindex="-1"></a>rule.apriori[<span class="fu">size</span>(<span class="fu">lhs</span>(rule.apriori))<span class="sc">==</span><span class="dv">0</span>] <span class="sc">|&gt;</span> </span>
<span id="cb154-2"><a href="self-learning-1.html#cb154-2" tabindex="-1"></a>  <span class="fu">print.rule.table</span>(<span class="at">all=</span>T)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{age=Middle-aged}
</td>
<td style="text-align:left;">
0.51
</td>
<td style="text-align:left;">
0.51
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
24671
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{income=small}
</td>
<td style="text-align:left;">
0.51
</td>
<td style="text-align:left;">
0.51
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
24720
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{workclass=Private}
</td>
<td style="text-align:left;">
0.69
</td>
<td style="text-align:left;">
0.69
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
33906
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{race=White}
</td>
<td style="text-align:left;">
0.86
</td>
<td style="text-align:left;">
0.86
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
41762
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{native-country=United-States}
</td>
<td style="text-align:left;">
0.90
</td>
<td style="text-align:left;">
0.90
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
43832
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{capital-gain=None}
</td>
<td style="text-align:left;">
0.92
</td>
<td style="text-align:left;">
0.92
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
44807
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{capital-loss=None}
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
0.95
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
46560
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{hours-per-week=Full-time}
</td>
<td style="text-align:left;">
0.59
</td>
<td style="text-align:left;">
0.59
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
28577
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{sex=Male}
</td>
<td style="text-align:left;">
0.67
</td>
<td style="text-align:left;">
0.67
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
32650
</td>
</tr>
</tbody>
</table>
<ul>
<li>相同條件下 eclat 的運算速度較快</li>
</ul>
</div>
</div>
<div id="就診紀錄" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> 就診紀錄<a href="self-learning-1.html#就診紀錄" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>下表紀錄了24位患者近兩年內的就診紀錄，請根據資料回答下列問題<br />
<img src="www/ex1.png" /></p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="self-learning-1.html#cb155-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;data/RA HW1-1.csv&#39;</span>, <span class="at">encoding =</span> <span class="st">&#39;UTF-8&#39;</span>)</span>
<span id="cb155-2"><a href="self-learning-1.html#cb155-2" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;ID&#39;</span>, <span class="fu">paste0</span>(<span class="st">&#39;sick&#39;</span>, <span class="fu">seq</span>(<span class="dv">3</span>)))</span>
<span id="cb155-3"><a href="self-learning-1.html#cb155-3" tabindex="-1"></a></span>
<span id="cb155-4"><a href="self-learning-1.html#cb155-4" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb155-5"><a href="self-learning-1.html#cb155-5" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">melt</span>(df, <span class="at">id=</span><span class="st">&quot;ID&quot;</span>)</span>
<span id="cb155-6"><a href="self-learning-1.html#cb155-6" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[,<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb155-7"><a href="self-learning-1.html#cb155-7" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="sc">!</span>df<span class="sc">$</span>value<span class="sc">==</span><span class="st">&quot;&quot;</span>,]</span></code></pre></div>
<ul>
<li class="downarrow">
<p>共 10 種疾病</p>
</li>
</ul>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="self-learning-1.html#cb156-1" tabindex="-1"></a><span class="fu">unique</span>(df<span class="sc">$</span>value)</span></code></pre></div>
<pre><code>##  [1] &quot;夜盲症&quot;   &quot;糖尿病&quot;   &quot;憂鬱症&quot;   &quot;流行感冒&quot; &quot;支氣管炎&quot; &quot;貧血&quot;    
##  [7] &quot;骨折&quot;     &quot;心肌梗塞&quot; &quot;心臟衰竭&quot; &quot;高血壓&quot;</code></pre>
<ul>
<li class="downarrow">
<p>資料框架(左) vs. 交易物件(右) 以第2個病人為例</p>
</li>
</ul>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="self-learning-1.html#cb158-1" tabindex="-1"></a>dat<span class="ot">=</span><span class="fu">split</span>(<span class="fu">as.factor</span>(df<span class="sc">$</span>value),<span class="fu">as.factor</span>(df<span class="sc">$</span>ID))</span>
<span id="cb158-2"><a href="self-learning-1.html#cb158-2" tabindex="-1"></a>sick <span class="ot">&lt;-</span> <span class="fu">transactions</span>(dat)</span>
<span id="cb158-3"><a href="self-learning-1.html#cb158-3" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">list</span>(df[df<span class="sc">$</span>ID<span class="sc">==</span><span class="dv">2</span>,], <span class="fu">DATAFRAME</span>(sick) <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">3</span>)))</span></code></pre></div>
<table class="kable_wrapper">
<tbody>
<tr>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
ID
</th>
<th style="text-align:left;">
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
糖尿病
</td>
</tr>
<tr>
<td style="text-align:left;">
26
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
憂鬱症
</td>
</tr>
<tr>
<td style="text-align:left;">
50
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
高血壓
</td>
</tr>
</tbody>
</table>
</td>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
items
</th>
<th style="text-align:left;">
transactionID
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
{夜盲症,流行感冒}
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
{高血壓,憂鬱症,糖尿病}
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
{流行感冒,憂鬱症}
</td>
<td style="text-align:left;">
3
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<ul>
<li class="downarrow">
<p>以支持度最低為 0.1、信賴度最低為 0.01、項目集最多 3 個，探勘規則</p>
</li>
</ul>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="self-learning-1.html#cb159-1" tabindex="-1"></a>rule <span class="ot">&lt;-</span> <span class="fu">apriori</span>(sick, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support=</span><span class="fl">0.1</span>, <span class="at">confidence=</span><span class="fl">0.01</span>, <span class="at">maxlen=</span><span class="dv">3</span>))</span></code></pre></div>
<ul>
<li class="downarrow">
<p>總共 14 條，包含 1 個項目的規則 8 條，包含 2 個項目的規則 6 條</p>
</li>
</ul>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="self-learning-1.html#cb160-1" tabindex="-1"></a>rule</span>
<span id="cb160-2"><a href="self-learning-1.html#cb160-2" tabindex="-1"></a><span class="fu">summary</span>(rule)<span class="sc">@</span>lengths</span>
<span id="cb160-3"><a href="self-learning-1.html#cb160-3" tabindex="-1"></a><span class="co"># inspectDT(rule) |&gt; DT::formatRound(columns=&#39;count&#39;, digits=0)</span></span></code></pre></div>
<pre><code>## set of 14 rules 
## sizes
## 1 2 
## 8 6</code></pre>
<hr />
<ol style="list-style-type: decimal">
<li>請列出所有的 k=1 項目集，並計算其支持度。<br />
</li>
</ol>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="self-learning-1.html#cb162-1" tabindex="-1"></a>rule[<span class="fu">size</span>(<span class="fu">lhs</span>(rule))<span class="sc">==</span><span class="dv">0</span>] <span class="sc">|&gt;</span> </span>
<span id="cb162-2"><a href="self-learning-1.html#cb162-2" tabindex="-1"></a>  <span class="fu">print.rule.table</span>(<span class="at">sortBy =</span> <span class="st">&#39;support&#39;</span>, <span class="at">all=</span>T) <span class="sc">|&gt;</span></span>
<span id="cb162-3"><a href="self-learning-1.html#cb162-3" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">4</span>, <span class="at">color =</span> <span class="st">&#39;#212F3C&#39;</span>, <span class="at">background =</span> <span class="st">&#39;#FEF9E7&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{流行感冒}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.38
</td>
<td style="text-align:left;">
0.38
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{糖尿病}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.29
</td>
<td style="text-align:left;">
0.29
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{支氣管炎}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.21
</td>
<td style="text-align:left;">
0.21
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{心臟衰竭}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.21
</td>
<td style="text-align:left;">
0.21
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{貧血}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.21
</td>
<td style="text-align:left;">
0.21
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{高血壓}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.17
</td>
<td style="text-align:left;">
0.17
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{骨折}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.12
</td>
<td style="text-align:left;">
0.12
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
{}
</td>
<td style="text-align:left;">
{夜盲症}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.12
</td>
<td style="text-align:left;">
0.12
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
3
</td>
</tr>
</tbody>
</table>
<hr />
<ol start="2" style="list-style-type: decimal">
<li>在 k=2 項目集中，請列出包含「糖尿病」之項目集與其所對應的支持度。<br />
</li>
</ol>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="self-learning-1.html#cb163-1" tabindex="-1"></a>rule[<span class="fu">size</span>(<span class="fu">lhs</span>(rule))<span class="sc">+</span><span class="fu">size</span>(<span class="fu">rhs</span>(rule))<span class="sc">==</span><span class="dv">2</span>] <span class="sc">|&gt;</span></span>
<span id="cb163-2"><a href="self-learning-1.html#cb163-2" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">subset=</span>lhs <span class="sc">%in%</span> <span class="st">&#39;糖尿病&#39;</span> <span class="sc">|</span> rhs <span class="sc">%in%</span> <span class="st">&#39;糖尿病&#39;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb163-3"><a href="self-learning-1.html#cb163-3" tabindex="-1"></a>  <span class="fu">print.rule.table</span>(<span class="at">all=</span>T, <span class="at">sort =</span> F) <span class="sc">|&gt;</span></span>
<span id="cb163-4"><a href="self-learning-1.html#cb163-4" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">4</span>, <span class="at">color =</span> <span class="st">&#39;#212F3C&#39;</span>, <span class="at">background =</span> <span class="st">&#39;#FEF9E7&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
{高血壓}
</td>
<td style="text-align:left;">
{糖尿病}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.17
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.17
</td>
<td style="text-align:left;">
3.4
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
{糖尿病}
</td>
<td style="text-align:left;">
{高血壓}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.17
</td>
<td style="text-align:left;">
0.57
</td>
<td style="text-align:left;">
0.29
</td>
<td style="text-align:left;">
3.4
</td>
<td style="text-align:left;">
4
</td>
</tr>
</tbody>
</table>
<hr />
<ol start="3" style="list-style-type: decimal">
<li>在 k=3 項目集中，請找出所有支持度高於0.2之規則。</li>
</ol>
<ul>
<li class="downarrow">
<p>支持度最低 0.1、信賴度最低 0.01 下沒有 k=3 的項目集</p>
</li>
</ul>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="self-learning-1.html#cb164-1" tabindex="-1"></a>rule[<span class="fu">size</span>(<span class="fu">lhs</span>(rule))<span class="sc">+</span><span class="fu">size</span>(<span class="fu">rhs</span>(rule))<span class="sc">==</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>## set of 0 rules</code></pre>
<ul>
<li class="downarrow">
<p>放寬條件，找出 k=3 的項目集，沒有支持度高於 0.2 的規則</p>
</li>
</ul>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="self-learning-1.html#cb166-1" tabindex="-1"></a>rule1 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(sick, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support=</span><span class="fl">0.001</span>, <span class="at">confidence=</span><span class="fl">0.001</span>))</span></code></pre></div>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="self-learning-1.html#cb167-1" tabindex="-1"></a><span class="fu">summary</span>(rule1)<span class="sc">@</span>lengths</span></code></pre></div>
<pre><code>## sizes
##  1  2  3 
## 10 28  3</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="self-learning-1.html#cb169-1" tabindex="-1"></a>rule1[<span class="fu">size</span>(<span class="fu">lhs</span>(rule1))<span class="sc">+</span><span class="fu">size</span>(<span class="fu">rhs</span>(rule1))<span class="sc">==</span><span class="dv">3</span>] <span class="sc">|&gt;</span></span>
<span id="cb169-2"><a href="self-learning-1.html#cb169-2" tabindex="-1"></a>  <span class="fu">print.rule.table</span>(<span class="at">all=</span>T) <span class="sc">|&gt;</span></span>
<span id="cb169-3"><a href="self-learning-1.html#cb169-3" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">4</span>, <span class="at">color =</span> <span class="st">&#39;#212F3C&#39;</span>, <span class="at">background =</span> <span class="st">&#39;#FEF9E7&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
40
</td>
<td style="text-align:left;">
{憂鬱症,糖尿病}
</td>
<td style="text-align:left;">
{高血壓}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.042
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;">
6.0
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
39
</td>
<td style="text-align:left;">
{高血壓,憂鬱症}
</td>
<td style="text-align:left;">
{糖尿病}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.042
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;">
3.4
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
41
</td>
<td style="text-align:left;">
{高血壓,糖尿病}
</td>
<td style="text-align:left;">
{憂鬱症}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.042
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.167
</td>
<td style="text-align:left;">
3.0
</td>
<td style="text-align:left;">
1
</td>
</tr>
</tbody>
</table>
<hr />
<ol start="4" style="list-style-type: decimal">
<li>根據(3)所找出之高頻項目集，請計算「糖尿病」對於同項目集中之另一項目之信賴度與增益。假設信賴度的門檻值為0.4，在此是否存在任何顯著之關聯規則？</li>
</ol>
<p>k=3 項目集為 {憂鬱症, 糖尿病, 高血壓}</p>
<ul>
<li class="downarrow">
<p>信賴度最低 0.4 下，{糖尿病} <span class="math inline">\(\to\)</span> {高血壓}為顯著的關聯規則</p>
</li>
</ul>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="self-learning-1.html#cb170-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">huxtable.bookdown =</span> <span class="cn">FALSE</span>)</span>
<span id="cb170-2"><a href="self-learning-1.html#cb170-2" tabindex="-1"></a>rule1[<span class="fu">size</span>(<span class="fu">lhs</span>(rule1))<span class="sc">+</span><span class="fu">size</span>(<span class="fu">rhs</span>(rule1))<span class="sc">==</span><span class="dv">2</span>] <span class="sc">|&gt;</span></span>
<span id="cb170-3"><a href="self-learning-1.html#cb170-3" tabindex="-1"></a>  <span class="fu">subset</span>(rule1, <span class="at">subset =</span> lhs <span class="sc">%oin%</span> <span class="st">&quot;糖尿病&quot;</span> <span class="sc">&amp;</span> rhs <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;憂鬱症&quot;</span>, <span class="st">&quot;高血壓&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb170-4"><a href="self-learning-1.html#cb170-4" tabindex="-1"></a>  <span class="fu">DATAFRAME</span>() <span class="sc">|&gt;</span></span>
<span id="cb170-5"><a href="self-learning-1.html#cb170-5" tabindex="-1"></a>  <span class="fu">mapping</span>(<span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">1.1</span>), <span class="st">&quot;confidence&quot;</span>)</span></code></pre></div>
<table class="huxtable" style="border-collapse: collapse; border: 0px; margin-bottom: 2em; margin-top: 2em; ; margin-left: auto; margin-right: auto;  " id="tab:unnamed-chunk-97">
<col><col><col><col><col><col><col><tr>
<th style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">LHS</th><th style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">RHS</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">support</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">confidence</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">coverage</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">lift</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">count</th></tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{糖尿病}</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{憂鬱症}</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.0417</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.143</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.292</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">1.71</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">1</td></tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{糖尿病}</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{高血壓}</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.167&nbsp;</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(254, 249, 231); font-weight: normal;"><span style="color: rgb(33, 47, 60);">0.571</span></td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.292</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">3.43</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">4</td></tr>
</table>

<hr />
<ol start="5" style="list-style-type: decimal">
<li>請將(2)、(3)、(4)中之項目「糖尿病」依次替換為「貧血」、「高血壓」、「憂鬱症」、「夜盲症」與「流行感冒」，探討是否有任何顯著之關聯規則可被建立。</li>
</ol>
<p>放寬條件後，k=3 項目集只有 {憂鬱症, 糖尿病, 高血壓}</p>
<ul>
<li class="downarrow">
<p>信賴度最低 0.4 下，顯著的關聯規則有:</p>
<ul>
<li>
{糖尿病} <span class="math inline">\(\to\)</span> {高血壓} (Q4.)
</li>
<li>
{憂鬱症} <span class="math inline">\(\to\)</span> {高血壓}
</li>
<li>
{憂鬱症} <span class="math inline">\(\to\)</span> {糖尿病}
</li>
<li>
{高血壓} <span class="math inline">\(\to\)</span> {糖尿病}，conf = 1 表示有看高血壓的病人都有看過糖尿病 (obs. 2, 8, 20, 22)
</li>
</ul>
</li>
</ul>
<table class="huxtable" style="border-collapse: collapse; border: 0px; margin-bottom: 2em; margin-top: 2em; ; margin-left: auto; margin-right: auto;  " id="tab:unnamed-chunk-98">
<col><col><col><col><col><col><col><tr>
<th style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">LHS</th><th style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">RHS</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">support</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">confidence</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">coverage</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">lift</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">count</th></tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{憂鬱症}</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{高血壓}</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.0417</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(254, 249, 231); font-weight: normal;"><span style="color: rgb(33, 47, 60);">0.5</span></td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.0833</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">3&nbsp;&nbsp;&nbsp;</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">1</td></tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{憂鬱症}</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{糖尿病}</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.0417</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(254, 249, 231); font-weight: normal;"><span style="color: rgb(33, 47, 60);">0.5</span></td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.0833</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">1.71</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">1</td></tr>
</table>

<table class="huxtable" style="border-collapse: collapse; border: 0px; margin-bottom: 2em; margin-top: 2em; ; margin-left: auto; margin-right: auto;  " id="tab:unnamed-chunk-98">
<col><col><col><col><col><col><col><tr>
<th style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">LHS</th><th style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">RHS</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">support</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">confidence</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">coverage</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">lift</th><th style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">count</th></tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{高血壓}</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{憂鬱症}</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.0417</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.25</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.167</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">3&nbsp;&nbsp;&nbsp;</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">1</td></tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{高血壓}</td><td style="vertical-align: top; text-align: left; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">{糖尿病}</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.167&nbsp;</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; background-color: rgb(254, 249, 231); font-weight: normal;"><span style="color: rgb(33, 47, 60);">1&nbsp;&nbsp;&nbsp;</span></td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">0.167</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">3.43</td><td style="vertical-align: top; text-align: right; white-space: normal; border-style: solid solid solid solid; border-width: 0pt 0pt 0pt 0pt;    padding: 6pt 6pt 6pt 6pt; font-weight: normal;">4</td></tr>
</table>

<hr />
<p><span class="math display">\[
conf(X\to Y)=\frac{P(X\cap Y)}{P(X)}&gt;0.4\\
\Rightarrow P(X\cap Y)&gt;0.4\cdot P(X)
\]</span></p>
<p>因此<span class="math inline">\(sup(X\to Y)\)</span>至少要<span class="math inline">\(0.4\cdot P(X)\)</span></p>
<ul>
<li class="downarrow">
<p>計算<span class="math inline">\(sup(X)\cdot0.4\)</span>，得到support至少要0.0168</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:right;">
lower
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
{流行感冒}
</td>
<td style="text-align:left;">
0.375
</td>
<td style="text-align:right;">
0.15
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
{糖尿病}
</td>
<td style="text-align:left;">
0.292
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
{支氣管炎}
</td>
<td style="text-align:left;">
0.208
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
{心臟衰竭}
</td>
<td style="text-align:left;">
0.208
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
{貧血}
</td>
<td style="text-align:left;">
0.208
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
{高血壓}
</td>
<td style="text-align:left;">
0.167
</td>
<td style="text-align:right;">
0.07
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
{骨折}
</td>
<td style="text-align:left;">
0.125
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
{夜盲症}
</td>
<td style="text-align:left;">
0.125
</td>
<td style="text-align:right;">
0.05
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
{憂鬱症}
</td>
<td style="text-align:left;">
0.083
</td>
<td style="text-align:right;">
0.03
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
{心肌梗塞}
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:right;">
0.02
</td>
</tr>
</tbody>
</table>
<ul>
<li class="downarrow">
<p>找 k=2 且 support最低0.015</p>
</li>
</ul>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="self-learning-1.html#cb171-1" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">apriori</span>(sick, <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support=</span><span class="fl">0.015</span>, <span class="at">confidence=</span><span class="fl">0.001</span>, <span class="at">minlen=</span><span class="dv">2</span>, <span class="at">maxlen=</span><span class="dv">2</span>))</span></code></pre></div>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="self-learning-1.html#cb172-1" tabindex="-1"></a><span class="fu">print.rule.table</span>(tmp, <span class="at">sub=</span>T, confidence<span class="sc">&gt;</span><span class="fl">0.4</span>, <span class="at">all=</span>T, <span class="at">sortBy =</span> <span class="st">&#39;confidence&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb172-2"><a href="self-learning-1.html#cb172-2" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">5</span>, <span class="at">color =</span> <span class="st">&#39;#212F3C&#39;</span>, <span class="at">background =</span> <span class="st">&#39;#FEF9E7&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
15
</td>
<td style="text-align:left;">
{高血壓}
</td>
<td style="text-align:left;">
{糖尿病}
</td>
<td style="text-align:left;">
0.167
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
1.00
</td>
<td style="text-align:left;">
0.167
</td>
<td style="text-align:left;">
3.4
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
19
</td>
<td style="text-align:left;">
{支氣管炎}
</td>
<td style="text-align:left;">
{流行感冒}
</td>
<td style="text-align:left;">
0.125
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.60
</td>
<td style="text-align:left;">
0.208
</td>
<td style="text-align:left;">
1.6
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
21
</td>
<td style="text-align:left;">
{心臟衰竭}
</td>
<td style="text-align:left;">
{貧血}
</td>
<td style="text-align:left;">
0.125
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.60
</td>
<td style="text-align:left;">
0.208
</td>
<td style="text-align:left;">
2.9
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
22
</td>
<td style="text-align:left;">
{貧血}
</td>
<td style="text-align:left;">
{心臟衰竭}
</td>
<td style="text-align:left;">
0.125
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.60
</td>
<td style="text-align:left;">
0.208
</td>
<td style="text-align:left;">
2.9
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
16
</td>
<td style="text-align:left;">
{糖尿病}
</td>
<td style="text-align:left;">
{高血壓}
</td>
<td style="text-align:left;">
0.167
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.57
</td>
<td style="text-align:left;">
0.292
</td>
<td style="text-align:left;">
3.4
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
{憂鬱症}
</td>
<td style="text-align:left;">
{高血壓}
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.50
</td>
<td style="text-align:left;">
0.083
</td>
<td style="text-align:left;">
3.0
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
{憂鬱症}
</td>
<td style="text-align:left;">
{糖尿病}
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.50
</td>
<td style="text-align:left;">
0.083
</td>
<td style="text-align:left;">
1.7
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
{憂鬱症}
</td>
<td style="text-align:left;">
{流行感冒}
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.50
</td>
<td style="text-align:left;">
0.083
</td>
<td style="text-align:left;">
1.3
</td>
<td style="text-align:left;">
1
</td>
</tr>
</tbody>
</table>
</div>
<div id="早餐店購買紀錄" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> 早餐店購買紀錄<a href="self-learning-1.html#早餐店購買紀錄" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>下表為某早餐店所統計之顧客交易紀錄，請根據資料回答下列問題 <img src="www/ex2.png" /></p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="self-learning-1.html#cb173-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;data/RA HW1-2.csv&#39;</span>, <span class="at">encoding =</span> <span class="st">&#39;UTF-8&#39;</span>)</span>
<span id="cb173-2"><a href="self-learning-1.html#cb173-2" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;ID&#39;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;stu&quot;</span>, <span class="st">&quot;items&quot;</span>)</span>
<span id="cb173-3"><a href="self-learning-1.html#cb173-3" tabindex="-1"></a></span>
<span id="cb173-4"><a href="self-learning-1.html#cb173-4" tabindex="-1"></a>items <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">strsplit</span>(df<span class="sc">$</span>items, <span class="st">&quot;,&quot;</span>), </span>
<span id="cb173-5"><a href="self-learning-1.html#cb173-5" tabindex="-1"></a>                <span class="cf">function</span>(x) <span class="fu">gsub</span>(<span class="st">&quot; &quot;</span>, <span class="st">&quot;&quot;</span>, x))</span>
<span id="cb173-6"><a href="self-learning-1.html#cb173-6" tabindex="-1"></a></span>
<span id="cb173-7"><a href="self-learning-1.html#cb173-7" tabindex="-1"></a>target <span class="ot">&lt;-</span> df[<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df), <span class="at">times =</span> <span class="fu">lengths</span>(items)), <span class="sc">-</span><span class="dv">4</span>]</span>
<span id="cb173-8"><a href="self-learning-1.html#cb173-8" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(target)){</span>
<span id="cb173-9"><a href="self-learning-1.html#cb173-9" tabindex="-1"></a>  target<span class="sc">$</span>item[i] <span class="ot">&lt;-</span> <span class="fu">unlist</span>(items)[i]</span>
<span id="cb173-10"><a href="self-learning-1.html#cb173-10" tabindex="-1"></a>}</span></code></pre></div>
<ul>
<li class="downarrow">
<p>共 13 種餐點</p>
</li>
</ul>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="self-learning-1.html#cb174-1" tabindex="-1"></a><span class="fu">unique</span>(target<span class="sc">$</span>item)</span></code></pre></div>
<pre><code>##  [1] &quot;燒餅&quot;   &quot;菜包&quot;   &quot;油條&quot;   &quot;豆漿&quot;   &quot;肉包&quot;   &quot;奶茶&quot;   &quot;蛋餅&quot;   &quot;吐司&quot;  
##  [9] &quot;漢堡&quot;   &quot;可樂&quot;   &quot;煎餃&quot;   &quot;柳橙汁&quot; &quot;鬆餅&quot;</code></pre>
<ul>
<li class="downarrow">
<p>資料框架(左) vs. 交易物件(右) 以第3個客人為例</p>
</li>
</ul>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="self-learning-1.html#cb176-1" tabindex="-1"></a>dat<span class="ot">=</span><span class="fu">split</span>(<span class="fu">as.factor</span>(<span class="fu">c</span>(target<span class="sc">$</span>item, target<span class="sc">$</span>sex, target<span class="sc">$</span>stu)),</span>
<span id="cb176-2"><a href="self-learning-1.html#cb176-2" tabindex="-1"></a>          <span class="fu">as.factor</span>(target<span class="sc">$</span>ID))</span>
<span id="cb176-3"><a href="self-learning-1.html#cb176-3" tabindex="-1"></a>breakfast <span class="ot">&lt;-</span> <span class="fu">transactions</span>(dat)</span>
<span id="cb176-4"><a href="self-learning-1.html#cb176-4" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">list</span>(df[df<span class="sc">$</span>ID<span class="sc">==</span><span class="dv">3</span>,], <span class="fu">DATAFRAME</span>(breakfast) <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">3</span>)))</span></code></pre></div>
<table class="kable_wrapper">
<tbody>
<tr>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
ID
</th>
<th style="text-align:left;">
sex
</th>
<th style="text-align:left;">
stu
</th>
<th style="text-align:left;">
items
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
男
</td>
<td style="text-align:left;">
是
</td>
<td style="text-align:left;">
肉包, 菜包, 奶茶
</td>
</tr>
</tbody>
</table>
</td>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
items
</th>
<th style="text-align:left;">
transactionID
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
{男,豆漿,油條,是,菜包,燒餅}
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
{男,豆漿,油條,是,菜包,燒餅}
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
{奶茶,肉包,男,是,菜包}
</td>
<td style="text-align:left;">
3
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<ul>
<li class="downarrow">
<p>以支持度最低為 0.2、信賴度最低為 0.5、項目集最多 3 個，<strong>“性別”及”是否為學生”不會出現在右手邊</strong>，探勘規則</p>
</li>
</ul>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="self-learning-1.html#cb177-1" tabindex="-1"></a>rule <span class="ot">&lt;-</span> <span class="fu">apriori</span>(breakfast, </span>
<span id="cb177-2"><a href="self-learning-1.html#cb177-2" tabindex="-1"></a>                <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support=</span><span class="fl">0.2</span>, <span class="at">confidence=</span><span class="fl">0.5</span>, <span class="at">maxlen=</span><span class="dv">3</span>),</span>
<span id="cb177-3"><a href="self-learning-1.html#cb177-3" tabindex="-1"></a>                <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">default=</span><span class="st">&quot;lhs&quot;</span>, </span>
<span id="cb177-4"><a href="self-learning-1.html#cb177-4" tabindex="-1"></a>                                  <span class="at">rhs=</span><span class="fu">unique</span>(target<span class="sc">$</span>item)))</span></code></pre></div>
<ul>
<li class="downarrow">
<p>總共 11 條，包含 2 個項目的規則 8 條，包含 3 個項目的規則 3 條</p>
</li>
</ul>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="self-learning-1.html#cb178-1" tabindex="-1"></a>rule</span>
<span id="cb178-2"><a href="self-learning-1.html#cb178-2" tabindex="-1"></a><span class="fu">summary</span>(rule)<span class="sc">@</span>lengths</span></code></pre></div>
<pre><code>## set of 11 rules 
## sizes
## 2 3 
## 8 3</code></pre>
<hr />
<ol style="list-style-type: decimal">
<li>請列出所有的 k=1 項目集，並計算其支持度。<br />
</li>
</ol>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="self-learning-1.html#cb180-1" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">itemFrequency</span>(breakfast) <span class="sc">|&gt;</span> <span class="fu">sort</span>(<span class="at">decreasing =</span> T), <span class="at">horiz =</span> T, <span class="at">las=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="bookdown-RS_files/figure-html/unnamed-chunk-107-1.png" width="1152" style="display: block; margin: auto;" /></p>
<hr />
<ol start="2" style="list-style-type: decimal">
<li>在k=2 項目集中，請找出所有支持度高於0.2之規則。</li>
</ol>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="self-learning-1.html#cb181-1" tabindex="-1"></a>rule[<span class="fu">size</span>(<span class="fu">lhs</span>(rule))<span class="sc">+</span><span class="fu">size</span>(<span class="fu">rhs</span>(rule))<span class="sc">==</span><span class="dv">2</span>] <span class="sc">|&gt;</span></span>
<span id="cb181-2"><a href="self-learning-1.html#cb181-2" tabindex="-1"></a>  <span class="fu">print.rule.table</span>(<span class="at">all=</span>T, <span class="at">sortBy =</span> <span class="st">&quot;support&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb181-3"><a href="self-learning-1.html#cb181-3" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">4</span>, <span class="at">color =</span> <span class="st">&#39;#212F3C&#39;</span>, <span class="at">background =</span> <span class="st">&#39;#FEF9E7&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.30
</td>
<td style="text-align:left;">
0.6
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.5
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{菜包}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.30
</td>
<td style="text-align:left;">
0.6
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.3
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{燒餅}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.0
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{奶茶}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.4
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.4
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.4
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{菜包}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.1
</td>
<td style="text-align:left;">
5
</td>
</tr>
</tbody>
</table>
<hr />
<ol start="3" style="list-style-type: decimal">
<li>在k=3 項目集中，請找出所有支持度高於0.2之規則。<br />
</li>
</ol>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="self-learning-1.html#cb182-1" tabindex="-1"></a>rule[<span class="fu">size</span>(<span class="fu">lhs</span>(rule))<span class="sc">+</span><span class="fu">size</span>(<span class="fu">rhs</span>(rule))<span class="sc">==</span><span class="dv">3</span>] <span class="sc">|&gt;</span></span>
<span id="cb182-2"><a href="self-learning-1.html#cb182-2" tabindex="-1"></a>  <span class="fu">print.rule.table</span>(<span class="at">all=</span>T, <span class="at">sortBy =</span> <span class="st">&quot;support&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb182-3"><a href="self-learning-1.html#cb182-3" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">4</span>, <span class="at">color =</span> <span class="st">&#39;#212F3C&#39;</span>, <span class="at">background =</span> <span class="st">&#39;#FEF9E7&#39;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
{男,是}
</td>
<td style="text-align:left;">
{燒餅}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.2
</td>
<td style="text-align:left;">
0.8
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
3.2
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
{男,是}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.2
</td>
<td style="text-align:left;">
0.8
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
2.3
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
{男,是}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;color: #212F3C !important;background-color: #FEF9E7 !important;">
0.2
</td>
<td style="text-align:left;">
0.8
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
2.0
</td>
<td style="text-align:left;">
4
</td>
</tr>
</tbody>
</table>
<hr />
<ol start="4" style="list-style-type: decimal">
<li>假設支持度門檻為0.2，信賴度門檻為0.5，請論述「菜包 <span class="math inline">\(\to\)</span> 柳橙汁」之規則是否成立？</li>
<li>承題(4)，請論述「燒餅」 <span class="math inline">\(\to\)</span> 「油條」、「豆漿」之規則是否成立？<br />
</li>
</ol>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="self-learning-1.html#cb183-1" tabindex="-1"></a><span class="fu">print.rule.table</span>(rule, <span class="at">all=</span>T, <span class="at">sortBy =</span> <span class="st">&quot;support&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;">
0.30
</td>
<td style="text-align:left;">
0.6
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
1.5
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{菜包}
</td>
<td style="text-align:left;">
0.30
</td>
<td style="text-align:left;">
0.6
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
1.3
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{燒餅}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
2.0
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{奶茶}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
1.4
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
1.4
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
1.4
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{菜包}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
1.1
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
9
</td>
<td style="text-align:left;">
{男,是}
</td>
<td style="text-align:left;">
{燒餅}
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.8
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
3.2
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
10
</td>
<td style="text-align:left;">
{男,是}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.8
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
2.3
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
11
</td>
<td style="text-align:left;">
{男,是}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.8
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
2.0
</td>
<td style="text-align:left;">
4
</td>
</tr>
</tbody>
</table>
<p>支持度門檻為0.2，信賴度門檻為0.5下，沒有「菜包 <span class="math inline">\(\to\)</span> 柳橙汁」和「燒餅 <span class="math inline">\(\to\)</span> 油條、豆漿」的規則</p>
<hr />
<ol start="6" style="list-style-type: decimal">
<li>假設將分析範圍鎖定為男性顧客，請分別論述題(4) ~ (5)之規則是否成立？反之，若鎖定女性顧客，題(4) ~ (5)規則之成立性又為如何？<br />
</li>
<li>假設將分析範圍鎖定為非學生之顧客，請分別論述(4) ~ (5)之規則是否成立？反之，若鎖定學生顧客，題(4) ~ (5)規則之成立性又為如何？</li>
</ol>
<hr />
<p><strong><em>Notice</em></strong>: 設定右手邊只會出現餐點後，餐點好像不會出現在左手邊</p>
<ul>
<li class="downarrow">
<p>調低門檻值</p>
</li>
</ul>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="self-learning-1.html#cb184-1" tabindex="-1"></a>test1 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(breakfast, </span>
<span id="cb184-2"><a href="self-learning-1.html#cb184-2" tabindex="-1"></a>                 <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support=</span><span class="fl">0.01</span>, <span class="at">confidence=</span><span class="fl">0.01</span>, <span class="at">maxlen=</span><span class="dv">3</span>),</span>
<span id="cb184-3"><a href="self-learning-1.html#cb184-3" tabindex="-1"></a>                 <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">default=</span><span class="st">&quot;lhs&quot;</span>, <span class="at">rhs=</span><span class="fu">unique</span>(target<span class="sc">$</span>item)))</span></code></pre></div>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="self-learning-1.html#cb185-1" tabindex="-1"></a>test1[<span class="fu">size</span>(<span class="fu">lhs</span>(test1))<span class="sc">+</span><span class="fu">size</span>(<span class="fu">rhs</span>(test1))<span class="sc">==</span><span class="dv">2</span>] <span class="sc">|&gt;</span></span>
<span id="cb185-2"><a href="self-learning-1.html#cb185-2" tabindex="-1"></a>  <span class="fu">print.rule.table</span>(<span class="at">all=</span>T, <span class="at">sortBy =</span> <span class="st">&quot;support&quot;</span>)</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
LHS
</th>
<th style="text-align:left;">
RHS
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
51
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;">
0.30
</td>
<td style="text-align:left;">
0.6
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.50
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
54
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{菜包}
</td>
<td style="text-align:left;">
0.30
</td>
<td style="text-align:left;">
0.6
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.33
</td>
<td style="text-align:left;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
35
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{燒餅}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
41
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{奶茶}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.43
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
46
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.43
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
47
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.43
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
50
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.25
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
52
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{菜包}
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.11
</td>
<td style="text-align:left;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
30
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{柳橙汁}
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
34
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{燒餅}
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.60
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
37
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{蛋餅}
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.33
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
43
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{奶茶}
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.14
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
55
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{菜包}
</td>
<td style="text-align:left;">
0.20
</td>
<td style="text-align:left;">
0.4
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.89
</td>
<td style="text-align:left;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
32
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{柳橙汁}
</td>
<td style="text-align:left;">
0.15
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.50
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
36
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{蛋餅}
</td>
<td style="text-align:left;">
0.15
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
39
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{蛋餅}
</td>
<td style="text-align:left;">
0.15
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
40
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{奶茶}
</td>
<td style="text-align:left;">
0.15
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.86
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
49
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;">
0.15
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.75
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
53
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{菜包}
</td>
<td style="text-align:left;">
0.15
</td>
<td style="text-align:left;">
0.3
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.67
</td>
<td style="text-align:left;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
19
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{肉包}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
22
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{可樂}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
24
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{漢堡}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
25
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{漢堡}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
26
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{吐司}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.33
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
27
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{吐司}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.33
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
38
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{蛋餅}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.67
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
42
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{奶茶}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.57
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
44
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.57
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
45
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{油條}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.57
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
48
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{豆漿}
</td>
<td style="text-align:left;">
0.10
</td>
<td style="text-align:left;">
0.2
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{鬆餅}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
15
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{鬆餅}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
16
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{煎餃}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
17
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{煎餃}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
2.00
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
18
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{肉包}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
20
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{肉包}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
21
</td>
<td style="text-align:left;">
{女}
</td>
<td style="text-align:left;">
{可樂}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
23
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{可樂}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
1.00
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
28
</td>
<td style="text-align:left;">
{是}
</td>
<td style="text-align:left;">
{吐司}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.67
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
29
</td>
<td style="text-align:left;">
{男}
</td>
<td style="text-align:left;">
{吐司}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.67
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
31
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{柳橙汁}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
33
</td>
<td style="text-align:left;">
{否}
</td>
<td style="text-align:left;">
{燒餅}
</td>
<td style="text-align:left;">
0.05
</td>
<td style="text-align:left;">
0.1
</td>
<td style="text-align:left;">
0.5
</td>
<td style="text-align:left;">
0.40
</td>
<td style="text-align:left;">
1
</td>
</tr>
</tbody>
</table>
<ul>
<li class="downarrow">
<p>沒辦法設定兩邊</p>
</li>
</ul>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="self-learning-1.html#cb186-1" tabindex="-1"></a><span class="fu">tryCatch</span>(</span>
<span id="cb186-2"><a href="self-learning-1.html#cb186-2" tabindex="-1"></a>  <span class="at">expr =</span> {</span>
<span id="cb186-3"><a href="self-learning-1.html#cb186-3" tabindex="-1"></a>    test2 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(breakfast, </span>
<span id="cb186-4"><a href="self-learning-1.html#cb186-4" tabindex="-1"></a>                 <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support=</span><span class="fl">0.01</span>, <span class="at">confidence=</span><span class="fl">0.01</span>, <span class="at">maxlen=</span><span class="dv">3</span>),</span>
<span id="cb186-5"><a href="self-learning-1.html#cb186-5" tabindex="-1"></a>                 <span class="at">appearance =</span> <span class="fu">list</span>(</span>
<span id="cb186-6"><a href="self-learning-1.html#cb186-6" tabindex="-1"></a>                   <span class="at">lhs=</span><span class="fu">unique</span>(<span class="fu">c</span>(target<span class="sc">$</span>item, target<span class="sc">$</span>sex, target<span class="sc">$</span>stu)),</span>
<span id="cb186-7"><a href="self-learning-1.html#cb186-7" tabindex="-1"></a>                   <span class="at">rhs=</span><span class="fu">unique</span>(target<span class="sc">$</span>item)))</span>
<span id="cb186-8"><a href="self-learning-1.html#cb186-8" tabindex="-1"></a>  },</span>
<span id="cb186-9"><a href="self-learning-1.html#cb186-9" tabindex="-1"></a>  <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb186-10"><a href="self-learning-1.html#cb186-10" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Error：&quot;</span>, e<span class="sc">$</span>message))</span>
<span id="cb186-11"><a href="self-learning-1.html#cb186-11" tabindex="-1"></a>  }</span>
<span id="cb186-12"><a href="self-learning-1.html#cb186-12" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] &quot;Error： The following items cannot be specified in multiple appearance locations: 燒餅, 菜包, 油條, 豆漿, 肉包, 奶茶, 蛋餅, 吐司, 漢堡, 可樂, 煎餃, 柳橙汁, 鬆餅&quot;</code></pre>
<ul>
<li class="downarrow">
<p>改設定左手邊，發現沒有規則，可能是因為沒有東西能放右手邊了</p>
</li>
</ul>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="self-learning-1.html#cb188-1" tabindex="-1"></a>test3 <span class="ot">&lt;-</span> <span class="fu">apriori</span>(breakfast, </span>
<span id="cb188-2"><a href="self-learning-1.html#cb188-2" tabindex="-1"></a>                 <span class="at">parameter =</span> <span class="fu">list</span>(<span class="at">support=</span><span class="fl">0.01</span>, <span class="at">confidence=</span><span class="fl">0.01</span>, <span class="at">maxlen=</span><span class="dv">3</span>),</span>
<span id="cb188-3"><a href="self-learning-1.html#cb188-3" tabindex="-1"></a>                 <span class="at">appearance =</span> <span class="fu">list</span>(</span>
<span id="cb188-4"><a href="self-learning-1.html#cb188-4" tabindex="-1"></a>                   <span class="at">lhs=</span><span class="fu">unique</span>(<span class="fu">c</span>(target<span class="sc">$</span>item, target<span class="sc">$</span>sex, target<span class="sc">$</span>stu)),</span>
<span id="cb188-5"><a href="self-learning-1.html#cb188-5" tabindex="-1"></a>                   <span class="at">default=</span><span class="st">&quot;rhs&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="self-learning-1.html#cb189-1" tabindex="-1"></a>test3</span></code></pre></div>
<pre><code>## set of 0 rules</code></pre>
</div>
<div id="groceries-data" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Groceries data<a href="self-learning-1.html#groceries-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="self-learning-1.html#cb191-1" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb191-2"><a href="self-learning-1.html#cb191-2" tabindex="-1"></a><span class="fu">library</span>(arulesViz)</span></code></pre></div>
<div id="rightarrow-item" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> ??? <span class="math inline">\(\rightarrow\)</span> item<a href="self-learning-1.html#rightarrow-item" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>What are customers likely to buy before buying whole milk?</li>
</ol>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="self-learning-1.html#cb192-1" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;Groceries&quot;</span>)</span>
<span id="cb192-2"><a href="self-learning-1.html#cb192-2" tabindex="-1"></a>rules<span class="ot">&lt;-</span><span class="fu">apriori</span>(<span class="at">data=</span>Groceries, <span class="at">parameter=</span><span class="fu">list</span>(<span class="at">supp=</span><span class="fl">0.001</span>,<span class="at">conf =</span> <span class="fl">0.08</span>), </span>
<span id="cb192-3"><a href="self-learning-1.html#cb192-3" tabindex="-1"></a>               <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">default=</span><span class="st">&quot;lhs&quot;</span>,<span class="at">rhs=</span><span class="st">&quot;whole milk&quot;</span>),</span>
<span id="cb192-4"><a href="self-learning-1.html#cb192-4" tabindex="-1"></a>               <span class="at">control =</span> <span class="fu">list</span>(<span class="at">verbose=</span>F))</span>
<span id="cb192-5"><a href="self-learning-1.html#cb192-5" tabindex="-1"></a>rules<span class="ot">&lt;-</span><span class="fu">sort</span>(rules, <span class="at">decreasing=</span><span class="cn">TRUE</span>,<span class="at">by=</span><span class="st">&quot;confidence&quot;</span>)</span>
<span id="cb192-6"><a href="self-learning-1.html#cb192-6" tabindex="-1"></a><span class="fu">DATAFRAME</span>(rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">separate=</span>F) <span class="sc">|&gt;</span> <span class="fu">format</span>(<span class="at">digits=</span><span class="dv">2</span>) <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
rule
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
196
</td>
<td style="text-align:left;">
{rice,sugar} =&gt; {whole milk}
</td>
<td style="text-align:left;">
0.0012
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0.0012
</td>
<td style="text-align:left;">
3.9
</td>
<td style="text-align:left;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
323
</td>
<td style="text-align:left;">
{canned fish,hygiene articles} =&gt; {whole milk}
</td>
<td style="text-align:left;">
0.0011
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0.0011
</td>
<td style="text-align:left;">
3.9
</td>
<td style="text-align:left;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
1643
</td>
<td style="text-align:left;">
{root vegetables,butter,rice} =&gt; {whole milk}
</td>
<td style="text-align:left;">
0.0010
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0.0010
</td>
<td style="text-align:left;">
3.9
</td>
<td style="text-align:left;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
1705
</td>
<td style="text-align:left;">
{root vegetables,whipped/sour cream,flour} =&gt; {whole milk}
</td>
<td style="text-align:left;">
0.0017
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0.0017
</td>
<td style="text-align:left;">
3.9
</td>
<td style="text-align:left;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
1716
</td>
<td style="text-align:left;">
{butter,soft cheese,domestic eggs} =&gt; {whole milk}
</td>
<td style="text-align:left;">
0.0010
</td>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0.0010
</td>
<td style="text-align:left;">
3.9
</td>
<td style="text-align:left;">
10
</td>
</tr>
</tbody>
</table>
</div>
<div id="item-rightarrow" class="section level3 hasAnchor" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> item <span class="math inline">\(\rightarrow\)</span> ???<a href="self-learning-1.html#item-rightarrow" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol start="2" style="list-style-type: decimal">
<li>What are customers likely to buy if they purchase whole milk?</li>
</ol>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="self-learning-1.html#cb193-1" tabindex="-1"></a>rules<span class="ot">&lt;-</span><span class="fu">apriori</span>(<span class="at">data=</span>Groceries, <span class="at">parameter=</span><span class="fu">list</span>(<span class="at">supp=</span><span class="fl">0.001</span>,<span class="at">conf =</span> <span class="fl">0.15</span>,<span class="at">minlen=</span><span class="dv">2</span>), </span>
<span id="cb193-2"><a href="self-learning-1.html#cb193-2" tabindex="-1"></a>               <span class="at">appearance =</span> <span class="fu">list</span>(<span class="at">default=</span><span class="st">&quot;rhs&quot;</span>,<span class="at">lhs=</span><span class="st">&quot;whole milk&quot;</span>),</span>
<span id="cb193-3"><a href="self-learning-1.html#cb193-3" tabindex="-1"></a>               <span class="at">control =</span> <span class="fu">list</span>(<span class="at">verbose=</span>F))</span>
<span id="cb193-4"><a href="self-learning-1.html#cb193-4" tabindex="-1"></a>rules<span class="ot">&lt;-</span><span class="fu">sort</span>(rules, <span class="at">decreasing=</span><span class="cn">TRUE</span>,<span class="at">by=</span><span class="st">&quot;confidence&quot;</span>)</span>
<span id="cb193-5"><a href="self-learning-1.html#cb193-5" tabindex="-1"></a><span class="fu">DATAFRAME</span>(rules[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">separate=</span>F) <span class="sc">|&gt;</span> <span class="fu">format</span>(<span class="at">digits=</span><span class="dv">2</span>) <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
rule
</th>
<th style="text-align:left;">
support
</th>
<th style="text-align:left;">
confidence
</th>
<th style="text-align:left;">
coverage
</th>
<th style="text-align:left;">
lift
</th>
<th style="text-align:left;">
count
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
{whole milk} =&gt; {other vegetables}
</td>
<td style="text-align:left;">
0.075
</td>
<td style="text-align:left;">
0.29
</td>
<td style="text-align:left;">
0.26
</td>
<td style="text-align:left;">
1.5
</td>
<td style="text-align:left;">
736
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
{whole milk} =&gt; {rolls/buns}
</td>
<td style="text-align:left;">
0.057
</td>
<td style="text-align:left;">
0.22
</td>
<td style="text-align:left;">
0.26
</td>
<td style="text-align:left;">
1.2
</td>
<td style="text-align:left;">
557
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
{whole milk} =&gt; {yogurt}
</td>
<td style="text-align:left;">
0.056
</td>
<td style="text-align:left;">
0.22
</td>
<td style="text-align:left;">
0.26
</td>
<td style="text-align:left;">
1.6
</td>
<td style="text-align:left;">
551
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
{whole milk} =&gt; {root vegetables}
</td>
<td style="text-align:left;">
0.049
</td>
<td style="text-align:left;">
0.19
</td>
<td style="text-align:left;">
0.26
</td>
<td style="text-align:left;">
1.8
</td>
<td style="text-align:left;">
481
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
{whole milk} =&gt; {tropical fruit}
</td>
<td style="text-align:left;">
0.042
</td>
<td style="text-align:left;">
0.17
</td>
<td style="text-align:left;">
0.26
</td>
<td style="text-align:left;">
1.6
</td>
<td style="text-align:left;">
416
</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="association-rule.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="collaborative-filtering.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "night",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
